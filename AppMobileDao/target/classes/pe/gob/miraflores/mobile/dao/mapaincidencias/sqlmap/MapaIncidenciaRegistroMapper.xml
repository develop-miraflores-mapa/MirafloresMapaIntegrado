<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="pe.gob.miraflores.mobile.dao.mapaincidencias.MapaIncidenciaRegistroMapper">
  <resultMap id="BaseResultMap" type="pe.gob.miraflores.mobile.domain.mapaincidencias.MapaIncidenciaRegistro">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 13 17:12:21 COT 2018.
    -->
    <id column="id_incidencia" jdbcType="INTEGER" property="idIncidencia" />
    <result column="cod_unidad" jdbcType="INTEGER" property="codUnidad" />
    <result column="cod_caso" jdbcType="INTEGER" property="codCaso" />
    <result column="cod_subcaso" jdbcType="INTEGER" property="codSubcaso" />
    <result column="cod_medio" jdbcType="INTEGER" property="codMedio" />
    <result column="cod_situacion" jdbcType="INTEGER" property="codSituacion" />
    <result column="desc_unidad" jdbcType="VARCHAR" property="descUnidad" />
    <result column="desc_caso" jdbcType="VARCHAR" property="descCaso" />
    <result column="desc_subcaso" jdbcType="VARCHAR" property="descSubcaso" />
    <result column="desc_medio" jdbcType="VARCHAR" property="descMedio" />
    <result column="desc_situacion" jdbcType="VARCHAR" property="descSituacion" />
    <result column="cod_unid_report" jdbcType="INTEGER" property="codUnidReport" />
    <result column="nomb_report" jdbcType="VARCHAR" property="nombReport" />
    <result column="telf_report" jdbcType="VARCHAR" property="telfReport" />
    <result column="dir_report" jdbcType="VARCHAR" property="dirReport" />
    <result column="cext_report" jdbcType="VARCHAR" property="cextReport" />
    <result column="cod_nac_report" jdbcType="INTEGER" property="codNacReport" />
    <result column="cod_geometria" jdbcType="INTEGER" property="codGeometria" />
    <result column="coordenadas" jdbcType="VARCHAR" property="coordenadas" />
    <result column="cod_tpo_via" jdbcType="INTEGER" property="codTpoVia" />
    <result column="desc_tpo_via" jdbcType="VARCHAR" property="descTpoVia" />
    <result column="desc_via" jdbcType="VARCHAR" property="descVia" />
    <result column="cdra" jdbcType="VARCHAR" property="cdra" />
    <result column="dpto" jdbcType="VARCHAR" property="dpto" />
    <result column="zona" jdbcType="VARCHAR" property="zona" />
    <result column="subzona" jdbcType="VARCHAR" property="subzona" />
    <result column="descripcion" jdbcType="VARCHAR" property="descripcion" />
    <result column="fec_notificacion" jdbcType="TIMESTAMP" property="fecNotificacion" />
    <result column="fec_evento" jdbcType="TIMESTAMP" property="fecEvento" />
    <result column="fec_atencion" jdbcType="TIMESTAMP" property="fecAtencion" />
    <result column="fec_cierre" jdbcType="TIMESTAMP" property="fecCierre" />
    <result column="cod_severidad" jdbcType="INTEGER" property="codSeveridad" />
    <result column="cod_estado" jdbcType="INTEGER" property="codEstado" />
    <result column="cod_subestado" jdbcType="INTEGER" property="codSubestado" />
    <result column="cod_modalidad" jdbcType="INTEGER" property="codModalidad" />
    <result column="cod_motivo" jdbcType="INTEGER" property="codMotivo" />
    <result column="desc_motivo" jdbcType="VARCHAR" property="descMotivo" />
    <result column="tpo_hallazgo" jdbcType="VARCHAR" property="tpoHallazgo" />
    <result column="tpo_sexo" jdbcType="VARCHAR" property="tpoSexo" />
    <result column="est_reg" jdbcType="VARCHAR" property="estReg" />
    <result column="nro_caso_voxiva" jdbcType="INTEGER" property="nroCasoVoxiva" />
    <result column="tipo_voxiva" jdbcType="VARCHAR" property="tipoVoxiva" />
    <result column="subtipo_voxiva" jdbcType="VARCHAR" property="subtipoVoxiva" />
    <result column="tiempo_cierre" jdbcType="VARCHAR" property="tiempoCierre" />
    <result column="area" jdbcType="VARCHAR" property="area" />
    <result column="cod_disp_origen" jdbcType="INTEGER" property="codDispOrigen" />
    <result column="desc_disp_origen" jdbcType="VARCHAR" property="descDispOrigen" />
    <result column="flg_heridos" jdbcType="VARCHAR" property="flgHeridos" />
    <result column="flg_callback" jdbcType="VARCHAR" property="flgCallback" />
    <result column="visible" jdbcType="VARCHAR" property="visible" />
    <result column="usr_registra" jdbcType="VARCHAR" property="usrRegistra" />
    <result column="usr_modifica" jdbcType="VARCHAR" property="usrModifica" />
    <result column="ind_leido" jdbcType="VARCHAR" property="indLeido" />
    <result column="tpo_operador" jdbcType="INTEGER" property="tpoOperador" />
    <result column="flg_reasignado" jdbcType="VARCHAR" property="flgReasignado" />
    <result column="url_audio" jdbcType="VARCHAR" property="urlAudio" />
    <result column="param1" jdbcType="VARCHAR" property="param1" />
    <result column="param2" jdbcType="VARCHAR" property="param2" />
    <result column="numero" jdbcType="VARCHAR" property="numero" />
    <result column="cod_area" jdbcType="INTEGER" property="codArea" />
    <result column="cod_zona" jdbcType="INTEGER" property="codZona" />
    <result column="cod_subzona" jdbcType="INTEGER" property="codSubzona" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 13 17:12:21 COT 2018.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 13 17:12:21 COT 2018.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 13 17:12:21 COT 2018.
    -->
    id_incidencia, cod_unidad, cod_caso, cod_subcaso, cod_medio, cod_situacion, desc_unidad, 
    desc_caso, desc_subcaso, desc_medio, desc_situacion, cod_unid_report, nomb_report, 
    telf_report, dir_report, cext_report, cod_nac_report, cod_geometria, coordenadas, 
    cod_tpo_via, desc_tpo_via, desc_via, cdra, dpto, zona, subzona, descripcion, fec_notificacion, 
    fec_evento, fec_atencion, fec_cierre, cod_severidad, cod_estado, cod_subestado, cod_modalidad, 
    cod_motivo, desc_motivo, tpo_hallazgo, tpo_sexo, est_reg, nro_caso_voxiva, tipo_voxiva, 
    subtipo_voxiva, tiempo_cierre, area, cod_disp_origen, desc_disp_origen, flg_heridos, 
    flg_callback, visible, usr_registra, usr_modifica, ind_leido, tpo_operador, flg_reasignado, 
    url_audio, param1, param2, numero, cod_area, cod_zona, cod_subzona
  </sql>
  <select id="selectByExample" parameterType="pe.gob.miraflores.mobile.domain.mapaincidencias.MapaIncidenciaRegistroCriteria" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 13 17:12:21 COT 2018.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from mapa.geo_map_incidencia
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 13 17:12:21 COT 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from mapa.geo_map_incidencia
    where id_incidencia = #{idIncidencia,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 13 17:12:21 COT 2018.
    -->
    delete from mapa.geo_map_incidencia
    where id_incidencia = #{idIncidencia,jdbcType=INTEGER}
  </delete>
  <delete id="deleteByExample" parameterType="pe.gob.miraflores.mobile.domain.mapaincidencias.MapaIncidenciaRegistroCriteria">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 13 17:12:21 COT 2018.
    -->
    delete from mapa.geo_map_incidencia
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="pe.gob.miraflores.mobile.domain.mapaincidencias.MapaIncidenciaRegistro">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 13 17:12:21 COT 2018.
    -->
    insert into mapa.geo_map_incidencia (id_incidencia, cod_unidad, cod_caso, 
      cod_subcaso, cod_medio, cod_situacion, 
      desc_unidad, desc_caso, desc_subcaso, 
      desc_medio, desc_situacion, cod_unid_report, 
      nomb_report, telf_report, dir_report, 
      cext_report, cod_nac_report, cod_geometria, 
      coordenadas, cod_tpo_via, desc_tpo_via, 
      desc_via, cdra, dpto, 
      zona, subzona, descripcion, 
      fec_notificacion, fec_evento, fec_atencion, 
      fec_cierre, cod_severidad, cod_estado, 
      cod_subestado, cod_modalidad, cod_motivo, 
      desc_motivo, tpo_hallazgo, tpo_sexo, 
      est_reg, nro_caso_voxiva, tipo_voxiva, 
      subtipo_voxiva, tiempo_cierre, area, 
      cod_disp_origen, desc_disp_origen, flg_heridos, 
      flg_callback, visible, usr_registra, 
      usr_modifica, ind_leido, tpo_operador, 
      flg_reasignado, url_audio, param1, 
      param2, numero, cod_area, 
      cod_zona, cod_subzona)
    values (#{idIncidencia,jdbcType=INTEGER}, #{codUnidad,jdbcType=INTEGER}, #{codCaso,jdbcType=INTEGER}, 
      #{codSubcaso,jdbcType=INTEGER}, #{codMedio,jdbcType=INTEGER}, #{codSituacion,jdbcType=INTEGER}, 
      #{descUnidad,jdbcType=VARCHAR}, #{descCaso,jdbcType=VARCHAR}, #{descSubcaso,jdbcType=VARCHAR}, 
      #{descMedio,jdbcType=VARCHAR}, #{descSituacion,jdbcType=VARCHAR}, #{codUnidReport,jdbcType=INTEGER}, 
      #{nombReport,jdbcType=VARCHAR}, #{telfReport,jdbcType=VARCHAR}, #{dirReport,jdbcType=VARCHAR}, 
      #{cextReport,jdbcType=VARCHAR}, #{codNacReport,jdbcType=INTEGER}, #{codGeometria,jdbcType=INTEGER}, 
      #{coordenadas,jdbcType=VARCHAR}, #{codTpoVia,jdbcType=INTEGER}, #{descTpoVia,jdbcType=VARCHAR}, 
      #{descVia,jdbcType=VARCHAR}, #{cdra,jdbcType=VARCHAR}, #{dpto,jdbcType=VARCHAR}, 
      #{zona,jdbcType=VARCHAR}, #{subzona,jdbcType=VARCHAR}, #{descripcion,jdbcType=VARCHAR}, 
      #{fecNotificacion,jdbcType=TIMESTAMP}, #{fecEvento,jdbcType=TIMESTAMP}, #{fecAtencion,jdbcType=TIMESTAMP}, 
      #{fecCierre,jdbcType=TIMESTAMP}, #{codSeveridad,jdbcType=INTEGER}, #{codEstado,jdbcType=INTEGER}, 
      #{codSubestado,jdbcType=INTEGER}, #{codModalidad,jdbcType=INTEGER}, #{codMotivo,jdbcType=INTEGER}, 
      #{descMotivo,jdbcType=VARCHAR}, #{tpoHallazgo,jdbcType=VARCHAR}, #{tpoSexo,jdbcType=VARCHAR}, 
      #{estReg,jdbcType=VARCHAR}, #{nroCasoVoxiva,jdbcType=INTEGER}, #{tipoVoxiva,jdbcType=VARCHAR}, 
      #{subtipoVoxiva,jdbcType=VARCHAR}, #{tiempoCierre,jdbcType=VARCHAR}, #{area,jdbcType=VARCHAR}, 
      #{codDispOrigen,jdbcType=INTEGER}, #{descDispOrigen,jdbcType=VARCHAR}, #{flgHeridos,jdbcType=VARCHAR}, 
      #{flgCallback,jdbcType=VARCHAR}, #{visible,jdbcType=VARCHAR}, #{usrRegistra,jdbcType=VARCHAR}, 
      #{usrModifica,jdbcType=VARCHAR}, #{indLeido,jdbcType=VARCHAR}, #{tpoOperador,jdbcType=INTEGER}, 
      #{flgReasignado,jdbcType=VARCHAR}, #{urlAudio,jdbcType=VARCHAR}, #{param1,jdbcType=VARCHAR}, 
      #{param2,jdbcType=VARCHAR}, #{numero,jdbcType=VARCHAR}, #{codArea,jdbcType=INTEGER}, 
      #{codZona,jdbcType=INTEGER}, #{codSubzona,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="pe.gob.miraflores.mobile.domain.mapaincidencias.MapaIncidenciaRegistro">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 13 17:12:21 COT 2018.
    -->
    <selectKey keyProperty="idIncidencia" resultType="int" order="BEFORE" >
		select (case when max(id_incidencia) is null then 1 else max(id_incidencia)+1 end) as value from mapa.geo_map_incidencia  
	</selectKey>
	
	insert into mapa.geo_map_incidencia
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="idIncidencia != null">
        id_incidencia,
      </if>
      <if test="codUnidad != null">
        cod_unidad,
      </if>
      <if test="codCaso != null">
        cod_caso,
      </if>
      <if test="codSubcaso != null">
        cod_subcaso,
      </if>
      <if test="codMedio != null">
        cod_medio,
      </if>
      <if test="codSituacion != null">
        cod_situacion,
      </if>
      <if test="descUnidad != null">
        desc_unidad,
      </if>
      <if test="descCaso != null">
        desc_caso,
      </if>
      <if test="descSubcaso != null">
        desc_subcaso,
      </if>
      <if test="descMedio != null">
        desc_medio,
      </if>
      <if test="descSituacion != null">
        desc_situacion,
      </if>
      <if test="codUnidReport != null">
        cod_unid_report,
      </if>
      <if test="nombReport != null">
        nomb_report,
      </if>
      <if test="telfReport != null">
        telf_report,
      </if>
      <if test="dirReport != null">
        dir_report,
      </if>
      <if test="cextReport != null">
        cext_report,
      </if>
      <if test="codNacReport != null">
        cod_nac_report,
      </if>
      <if test="codGeometria != null">
        cod_geometria,
      </if>
      <if test="coordenadas != null">
        coordenadas,
      </if>
      <if test="codTpoVia != null">
        cod_tpo_via,
      </if>
      <if test="descTpoVia != null">
        desc_tpo_via,
      </if>
      <if test="descVia != null">
        desc_via,
      </if>
      <if test="cdra != null">
        cdra,
      </if>
      <if test="dpto != null">
        dpto,
      </if>
      <if test="zona != null">
        zona,
      </if>
      <if test="subzona != null">
        subzona,
      </if>
      <if test="descripcion != null">
        descripcion,
      </if>
      <if test="fecNotificacion != null">
        fec_notificacion,
      </if>
      <if test="fecEvento != null">
        fec_evento,
      </if>
      <if test="fecAtencion != null">
        fec_atencion,
      </if>
      <if test="fecCierre != null">
        fec_cierre,
      </if>
      <if test="codSeveridad != null">
        cod_severidad,
      </if>
      <if test="codEstado != null">
        cod_estado,
      </if>
      <if test="codSubestado != null">
        cod_subestado,
      </if>
      <if test="codModalidad != null">
        cod_modalidad,
      </if>
      <if test="codMotivo != null">
        cod_motivo,
      </if>
      <if test="descMotivo != null">
        desc_motivo,
      </if>
      <if test="tpoHallazgo != null">
        tpo_hallazgo,
      </if>
      <if test="tpoSexo != null">
        tpo_sexo,
      </if>
      <if test="estReg != null">
        est_reg,
      </if>
      <if test="nroCasoVoxiva != null">
        nro_caso_voxiva,
      </if>
      <if test="tipoVoxiva != null">
        tipo_voxiva,
      </if>
      <if test="subtipoVoxiva != null">
        subtipo_voxiva,
      </if>
      <if test="tiempoCierre != null">
        tiempo_cierre,
      </if>
      <if test="area != null">
        area,
      </if>
      <if test="codDispOrigen != null">
        cod_disp_origen,
      </if>
      <if test="descDispOrigen != null">
        desc_disp_origen,
      </if>
      <if test="flgHeridos != null">
        flg_heridos,
      </if>
      <if test="flgCallback != null">
        flg_callback,
      </if>
      <if test="visible != null">
        visible,
      </if>
      <if test="usrRegistra != null">
        usr_registra,
      </if>
      <if test="usrModifica != null">
        usr_modifica,
      </if>
      <if test="indLeido != null">
        ind_leido,
      </if>
      <if test="tpoOperador != null">
        tpo_operador,
      </if>
      <if test="flgReasignado != null">
        flg_reasignado,
      </if>
      <if test="urlAudio != null">
        url_audio,
      </if>
      <if test="param1 != null">
        param1,
      </if>
      <if test="param2 != null">
        param2,
      </if>
      <if test="numero != null">
        numero,
      </if>
      <if test="codArea != null">
        cod_area,
      </if>
      <if test="codZona != null">
        cod_zona,
      </if>
      <if test="codSubzona != null">
        cod_subzona,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="idIncidencia != null">
        #{idIncidencia,jdbcType=INTEGER},
      </if>
      <if test="codUnidad != null">
        #{codUnidad,jdbcType=INTEGER},
      </if>
      <if test="codCaso != null">
        #{codCaso,jdbcType=INTEGER},
      </if>
      <if test="codSubcaso != null">
        #{codSubcaso,jdbcType=INTEGER},
      </if>
      <if test="codMedio != null">
        #{codMedio,jdbcType=INTEGER},
      </if>
      <if test="codSituacion != null">
        #{codSituacion,jdbcType=INTEGER},
      </if>
      <if test="descUnidad != null">
        #{descUnidad,jdbcType=VARCHAR},
      </if>
      <if test="descCaso != null">
        #{descCaso,jdbcType=VARCHAR},
      </if>
      <if test="descSubcaso != null">
        #{descSubcaso,jdbcType=VARCHAR},
      </if>
      <if test="descMedio != null">
        #{descMedio,jdbcType=VARCHAR},
      </if>
      <if test="descSituacion != null">
        #{descSituacion,jdbcType=VARCHAR},
      </if>
      <if test="codUnidReport != null">
        #{codUnidReport,jdbcType=INTEGER},
      </if>
      <if test="nombReport != null">
        #{nombReport,jdbcType=VARCHAR},
      </if>
      <if test="telfReport != null">
        #{telfReport,jdbcType=VARCHAR},
      </if>
      <if test="dirReport != null">
        #{dirReport,jdbcType=VARCHAR},
      </if>
      <if test="cextReport != null">
        #{cextReport,jdbcType=VARCHAR},
      </if>
      <if test="codNacReport != null">
        #{codNacReport,jdbcType=INTEGER},
      </if>
      <if test="codGeometria != null">
        #{codGeometria,jdbcType=INTEGER},
      </if>
      <if test="coordenadas != null">
        #{coordenadas,jdbcType=VARCHAR},
      </if>
      <if test="codTpoVia != null">
        #{codTpoVia,jdbcType=INTEGER},
      </if>
      <if test="descTpoVia != null">
        #{descTpoVia,jdbcType=VARCHAR},
      </if>
      <if test="descVia != null">
        #{descVia,jdbcType=VARCHAR},
      </if>
      <if test="cdra != null">
        #{cdra,jdbcType=VARCHAR},
      </if>
      <if test="dpto != null">
        #{dpto,jdbcType=VARCHAR},
      </if>
      <if test="zona != null">
        #{zona,jdbcType=VARCHAR},
      </if>
      <if test="subzona != null">
        #{subzona,jdbcType=VARCHAR},
      </if>
      <if test="descripcion != null">
        #{descripcion,jdbcType=VARCHAR},
      </if>
      <if test="fecNotificacion != null">
        #{fecNotificacion,jdbcType=TIMESTAMP},
      </if>
      <if test="fecEvento != null">
        #{fecEvento,jdbcType=TIMESTAMP},
      </if>
      <if test="fecAtencion != null">
        #{fecAtencion,jdbcType=TIMESTAMP},
      </if>
      <if test="fecCierre != null">
        #{fecCierre,jdbcType=TIMESTAMP},
      </if>
      <if test="codSeveridad != null">
        #{codSeveridad,jdbcType=INTEGER},
      </if>
      <if test="codEstado != null">
        #{codEstado,jdbcType=INTEGER},
      </if>
      <if test="codSubestado != null">
        #{codSubestado,jdbcType=INTEGER},
      </if>
      <if test="codModalidad != null">
        #{codModalidad,jdbcType=INTEGER},
      </if>
      <if test="codMotivo != null">
        #{codMotivo,jdbcType=INTEGER},
      </if>
      <if test="descMotivo != null">
        #{descMotivo,jdbcType=VARCHAR},
      </if>
      <if test="tpoHallazgo != null">
        #{tpoHallazgo,jdbcType=VARCHAR},
      </if>
      <if test="tpoSexo != null">
        #{tpoSexo,jdbcType=VARCHAR},
      </if>
      <if test="estReg != null">
        #{estReg,jdbcType=VARCHAR},
      </if>
      <if test="nroCasoVoxiva != null">
        #{nroCasoVoxiva,jdbcType=INTEGER},
      </if>
      <if test="tipoVoxiva != null">
        #{tipoVoxiva,jdbcType=VARCHAR},
      </if>
      <if test="subtipoVoxiva != null">
        #{subtipoVoxiva,jdbcType=VARCHAR},
      </if>
      <if test="tiempoCierre != null">
        #{tiempoCierre,jdbcType=VARCHAR},
      </if>
      <if test="area != null">
        #{area,jdbcType=VARCHAR},
      </if>
      <if test="codDispOrigen != null">
        #{codDispOrigen,jdbcType=INTEGER},
      </if>
      <if test="descDispOrigen != null">
        #{descDispOrigen,jdbcType=VARCHAR},
      </if>
      <if test="flgHeridos != null">
        #{flgHeridos,jdbcType=VARCHAR},
      </if>
      <if test="flgCallback != null">
        #{flgCallback,jdbcType=VARCHAR},
      </if>
      <if test="visible != null">
        #{visible,jdbcType=VARCHAR},
      </if>
      <if test="usrRegistra != null">
        #{usrRegistra,jdbcType=VARCHAR},
      </if>
      <if test="usrModifica != null">
        #{usrModifica,jdbcType=VARCHAR},
      </if>
      <if test="indLeido != null">
        #{indLeido,jdbcType=VARCHAR},
      </if>
      <if test="tpoOperador != null">
        #{tpoOperador,jdbcType=INTEGER},
      </if>
      <if test="flgReasignado != null">
        #{flgReasignado,jdbcType=VARCHAR},
      </if>
      <if test="urlAudio != null">
        #{urlAudio,jdbcType=VARCHAR},
      </if>
      <if test="param1 != null">
        #{param1,jdbcType=VARCHAR},
      </if>
      <if test="param2 != null">
        #{param2,jdbcType=VARCHAR},
      </if>
      <if test="numero != null">
        #{numero,jdbcType=VARCHAR},
      </if>
      <if test="codArea != null">
        #{codArea,jdbcType=INTEGER},
      </if>
      <if test="codZona != null">
        #{codZona,jdbcType=INTEGER},
      </if>
      <if test="codSubzona != null">
        #{codSubzona,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="pe.gob.miraflores.mobile.domain.mapaincidencias.MapaIncidenciaRegistroCriteria" resultType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 13 17:12:21 COT 2018.
    -->
    select count(*) from mapa.geo_map_incidencia
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 13 17:12:21 COT 2018.
    -->
    update mapa.geo_map_incidencia
    <set>
      <if test="record.idIncidencia != null">
        id_incidencia = #{record.idIncidencia,jdbcType=INTEGER},
      </if>
      <if test="record.codUnidad != null">
        cod_unidad = #{record.codUnidad,jdbcType=INTEGER},
      </if>
      <if test="record.codCaso != null">
        cod_caso = #{record.codCaso,jdbcType=INTEGER},
      </if>
      <if test="record.codSubcaso != null">
        cod_subcaso = #{record.codSubcaso,jdbcType=INTEGER},
      </if>
      <if test="record.codMedio != null">
        cod_medio = #{record.codMedio,jdbcType=INTEGER},
      </if>
      <if test="record.codSituacion != null">
        cod_situacion = #{record.codSituacion,jdbcType=INTEGER},
      </if>
      <if test="record.descUnidad != null">
        desc_unidad = #{record.descUnidad,jdbcType=VARCHAR},
      </if>
      <if test="record.descCaso != null">
        desc_caso = #{record.descCaso,jdbcType=VARCHAR},
      </if>
      <if test="record.descSubcaso != null">
        desc_subcaso = #{record.descSubcaso,jdbcType=VARCHAR},
      </if>
      <if test="record.descMedio != null">
        desc_medio = #{record.descMedio,jdbcType=VARCHAR},
      </if>
      <if test="record.descSituacion != null">
        desc_situacion = #{record.descSituacion,jdbcType=VARCHAR},
      </if>
      <if test="record.codUnidReport != null">
        cod_unid_report = #{record.codUnidReport,jdbcType=INTEGER},
      </if>
      <if test="record.nombReport != null">
        nomb_report = #{record.nombReport,jdbcType=VARCHAR},
      </if>
      <if test="record.telfReport != null">
        telf_report = #{record.telfReport,jdbcType=VARCHAR},
      </if>
      <if test="record.dirReport != null">
        dir_report = #{record.dirReport,jdbcType=VARCHAR},
      </if>
      <if test="record.cextReport != null">
        cext_report = #{record.cextReport,jdbcType=VARCHAR},
      </if>
      <if test="record.codNacReport != null">
        cod_nac_report = #{record.codNacReport,jdbcType=INTEGER},
      </if>
      <if test="record.codGeometria != null">
        cod_geometria = #{record.codGeometria,jdbcType=INTEGER},
      </if>
      <if test="record.coordenadas != null">
        coordenadas = #{record.coordenadas,jdbcType=VARCHAR},
      </if>
      <if test="record.codTpoVia != null">
        cod_tpo_via = #{record.codTpoVia,jdbcType=INTEGER},
      </if>
      <if test="record.descTpoVia != null">
        desc_tpo_via = #{record.descTpoVia,jdbcType=VARCHAR},
      </if>
      <if test="record.descVia != null">
        desc_via = #{record.descVia,jdbcType=VARCHAR},
      </if>
      <if test="record.cdra != null">
        cdra = #{record.cdra,jdbcType=VARCHAR},
      </if>
      <if test="record.dpto != null">
        dpto = #{record.dpto,jdbcType=VARCHAR},
      </if>
      <if test="record.zona != null">
        zona = #{record.zona,jdbcType=VARCHAR},
      </if>
      <if test="record.subzona != null">
        subzona = #{record.subzona,jdbcType=VARCHAR},
      </if>
      <if test="record.descripcion != null">
        descripcion = #{record.descripcion,jdbcType=VARCHAR},
      </if>
      <if test="record.fecNotificacion != null">
        fec_notificacion = #{record.fecNotificacion,jdbcType=TIMESTAMP},
      </if>
      <if test="record.fecEvento != null">
        fec_evento = #{record.fecEvento,jdbcType=TIMESTAMP},
      </if>
      <if test="record.fecAtencion != null">
        fec_atencion = #{record.fecAtencion,jdbcType=TIMESTAMP},
      </if>
      <if test="record.fecCierre != null">
        fec_cierre = #{record.fecCierre,jdbcType=TIMESTAMP},
      </if>
      <if test="record.codSeveridad != null">
        cod_severidad = #{record.codSeveridad,jdbcType=INTEGER},
      </if>
      <if test="record.codEstado != null">
        cod_estado = #{record.codEstado,jdbcType=INTEGER},
      </if>
      <if test="record.codSubestado != null">
        cod_subestado = #{record.codSubestado,jdbcType=INTEGER},
      </if>
      <if test="record.codModalidad != null">
        cod_modalidad = #{record.codModalidad,jdbcType=INTEGER},
      </if>
      <if test="record.codMotivo != null">
        cod_motivo = #{record.codMotivo,jdbcType=INTEGER},
      </if>
      <if test="record.descMotivo != null">
        desc_motivo = #{record.descMotivo,jdbcType=VARCHAR},
      </if>
      <if test="record.tpoHallazgo != null">
        tpo_hallazgo = #{record.tpoHallazgo,jdbcType=VARCHAR},
      </if>
      <if test="record.tpoSexo != null">
        tpo_sexo = #{record.tpoSexo,jdbcType=VARCHAR},
      </if>
      <if test="record.estReg != null">
        est_reg = #{record.estReg,jdbcType=VARCHAR},
      </if>
      <if test="record.nroCasoVoxiva != null">
        nro_caso_voxiva = #{record.nroCasoVoxiva,jdbcType=INTEGER},
      </if>
      <if test="record.tipoVoxiva != null">
        tipo_voxiva = #{record.tipoVoxiva,jdbcType=VARCHAR},
      </if>
      <if test="record.subtipoVoxiva != null">
        subtipo_voxiva = #{record.subtipoVoxiva,jdbcType=VARCHAR},
      </if>
      <if test="record.tiempoCierre != null">
        tiempo_cierre = #{record.tiempoCierre,jdbcType=VARCHAR},
      </if>
      <if test="record.area != null">
        area = #{record.area,jdbcType=VARCHAR},
      </if>
      <if test="record.codDispOrigen != null">
        cod_disp_origen = #{record.codDispOrigen,jdbcType=INTEGER},
      </if>
      <if test="record.descDispOrigen != null">
        desc_disp_origen = #{record.descDispOrigen,jdbcType=VARCHAR},
      </if>
      <if test="record.flgHeridos != null">
        flg_heridos = #{record.flgHeridos,jdbcType=VARCHAR},
      </if>
      <if test="record.flgCallback != null">
        flg_callback = #{record.flgCallback,jdbcType=VARCHAR},
      </if>
      <if test="record.visible != null">
        visible = #{record.visible,jdbcType=VARCHAR},
      </if>
      <if test="record.usrRegistra != null">
        usr_registra = #{record.usrRegistra,jdbcType=VARCHAR},
      </if>
      <if test="record.usrModifica != null">
        usr_modifica = #{record.usrModifica,jdbcType=VARCHAR},
      </if>
      <if test="record.indLeido != null">
        ind_leido = #{record.indLeido,jdbcType=VARCHAR},
      </if>
      <if test="record.tpoOperador != null">
        tpo_operador = #{record.tpoOperador,jdbcType=INTEGER},
      </if>
      <if test="record.flgReasignado != null">
        flg_reasignado = #{record.flgReasignado,jdbcType=VARCHAR},
      </if>
      <if test="record.urlAudio != null">
        url_audio = #{record.urlAudio,jdbcType=VARCHAR},
      </if>
      <if test="record.param1 != null">
        param1 = #{record.param1,jdbcType=VARCHAR},
      </if>
      <if test="record.param2 != null">
        param2 = #{record.param2,jdbcType=VARCHAR},
      </if>
      <if test="record.numero != null">
        numero = #{record.numero,jdbcType=VARCHAR},
      </if>
      <if test="record.codArea != null">
        cod_area = #{record.codArea,jdbcType=INTEGER},
      </if>
      <if test="record.codZona != null">
        cod_zona = #{record.codZona,jdbcType=INTEGER},
      </if>
      <if test="record.codSubzona != null">
        cod_subzona = #{record.codSubzona,jdbcType=INTEGER},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 13 17:12:21 COT 2018.
    -->
    update mapa.geo_map_incidencia
    set id_incidencia = #{record.idIncidencia,jdbcType=INTEGER},
      cod_unidad = #{record.codUnidad,jdbcType=INTEGER},
      cod_caso = #{record.codCaso,jdbcType=INTEGER},
      cod_subcaso = #{record.codSubcaso,jdbcType=INTEGER},
      cod_medio = #{record.codMedio,jdbcType=INTEGER},
      cod_situacion = #{record.codSituacion,jdbcType=INTEGER},
      desc_unidad = #{record.descUnidad,jdbcType=VARCHAR},
      desc_caso = #{record.descCaso,jdbcType=VARCHAR},
      desc_subcaso = #{record.descSubcaso,jdbcType=VARCHAR},
      desc_medio = #{record.descMedio,jdbcType=VARCHAR},
      desc_situacion = #{record.descSituacion,jdbcType=VARCHAR},
      cod_unid_report = #{record.codUnidReport,jdbcType=INTEGER},
      nomb_report = #{record.nombReport,jdbcType=VARCHAR},
      telf_report = #{record.telfReport,jdbcType=VARCHAR},
      dir_report = #{record.dirReport,jdbcType=VARCHAR},
      cext_report = #{record.cextReport,jdbcType=VARCHAR},
      cod_nac_report = #{record.codNacReport,jdbcType=INTEGER},
      cod_geometria = #{record.codGeometria,jdbcType=INTEGER},
      coordenadas = #{record.coordenadas,jdbcType=VARCHAR},
      cod_tpo_via = #{record.codTpoVia,jdbcType=INTEGER},
      desc_tpo_via = #{record.descTpoVia,jdbcType=VARCHAR},
      desc_via = #{record.descVia,jdbcType=VARCHAR},
      cdra = #{record.cdra,jdbcType=VARCHAR},
      dpto = #{record.dpto,jdbcType=VARCHAR},
      zona = #{record.zona,jdbcType=VARCHAR},
      subzona = #{record.subzona,jdbcType=VARCHAR},
      descripcion = #{record.descripcion,jdbcType=VARCHAR},
      fec_notificacion = #{record.fecNotificacion,jdbcType=TIMESTAMP},
      fec_evento = #{record.fecEvento,jdbcType=TIMESTAMP},
      fec_atencion = #{record.fecAtencion,jdbcType=TIMESTAMP},
      fec_cierre = #{record.fecCierre,jdbcType=TIMESTAMP},
      cod_severidad = #{record.codSeveridad,jdbcType=INTEGER},
      cod_estado = #{record.codEstado,jdbcType=INTEGER},
      cod_subestado = #{record.codSubestado,jdbcType=INTEGER},
      cod_modalidad = #{record.codModalidad,jdbcType=INTEGER},
      cod_motivo = #{record.codMotivo,jdbcType=INTEGER},
      desc_motivo = #{record.descMotivo,jdbcType=VARCHAR},
      tpo_hallazgo = #{record.tpoHallazgo,jdbcType=VARCHAR},
      tpo_sexo = #{record.tpoSexo,jdbcType=VARCHAR},
      est_reg = #{record.estReg,jdbcType=VARCHAR},
      nro_caso_voxiva = #{record.nroCasoVoxiva,jdbcType=INTEGER},
      tipo_voxiva = #{record.tipoVoxiva,jdbcType=VARCHAR},
      subtipo_voxiva = #{record.subtipoVoxiva,jdbcType=VARCHAR},
      tiempo_cierre = #{record.tiempoCierre,jdbcType=VARCHAR},
      area = #{record.area,jdbcType=VARCHAR},
      cod_disp_origen = #{record.codDispOrigen,jdbcType=INTEGER},
      desc_disp_origen = #{record.descDispOrigen,jdbcType=VARCHAR},
      flg_heridos = #{record.flgHeridos,jdbcType=VARCHAR},
      flg_callback = #{record.flgCallback,jdbcType=VARCHAR},
      visible = #{record.visible,jdbcType=VARCHAR},
      usr_registra = #{record.usrRegistra,jdbcType=VARCHAR},
      usr_modifica = #{record.usrModifica,jdbcType=VARCHAR},
      ind_leido = #{record.indLeido,jdbcType=VARCHAR},
      tpo_operador = #{record.tpoOperador,jdbcType=INTEGER},
      flg_reasignado = #{record.flgReasignado,jdbcType=VARCHAR},
      url_audio = #{record.urlAudio,jdbcType=VARCHAR},
      param1 = #{record.param1,jdbcType=VARCHAR},
      param2 = #{record.param2,jdbcType=VARCHAR},
      numero = #{record.numero,jdbcType=VARCHAR},
      cod_area = #{record.codArea,jdbcType=INTEGER},
      cod_zona = #{record.codZona,jdbcType=INTEGER},
      cod_subzona = #{record.codSubzona,jdbcType=INTEGER}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="pe.gob.miraflores.mobile.domain.mapaincidencias.MapaIncidenciaRegistro">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 13 17:12:21 COT 2018.
    -->
    update mapa.geo_map_incidencia
    <set>
      <if test="codUnidad != null">
        cod_unidad = #{codUnidad,jdbcType=INTEGER},
      </if>
      <if test="codCaso != null">
        cod_caso = #{codCaso,jdbcType=INTEGER},
      </if>
      <if test="codSubcaso != null">
        cod_subcaso = #{codSubcaso,jdbcType=INTEGER},
      </if>
      <if test="codMedio != null">
        cod_medio = #{codMedio,jdbcType=INTEGER},
      </if>
      <if test="codSituacion != null">
        cod_situacion = #{codSituacion,jdbcType=INTEGER},
      </if>
      <if test="descUnidad != null">
        desc_unidad = #{descUnidad,jdbcType=VARCHAR},
      </if>
      <if test="descCaso != null">
        desc_caso = #{descCaso,jdbcType=VARCHAR},
      </if>
      <if test="descSubcaso != null">
        desc_subcaso = #{descSubcaso,jdbcType=VARCHAR},
      </if>
      <if test="descMedio != null">
        desc_medio = #{descMedio,jdbcType=VARCHAR},
      </if>
      <if test="descSituacion != null">
        desc_situacion = #{descSituacion,jdbcType=VARCHAR},
      </if>
      <if test="codUnidReport != null">
        cod_unid_report = #{codUnidReport,jdbcType=INTEGER},
      </if>
      <if test="nombReport != null">
        nomb_report = #{nombReport,jdbcType=VARCHAR},
      </if>
      <if test="telfReport != null">
        telf_report = #{telfReport,jdbcType=VARCHAR},
      </if>
      <if test="dirReport != null">
        dir_report = #{dirReport,jdbcType=VARCHAR},
      </if>
      <if test="cextReport != null">
        cext_report = #{cextReport,jdbcType=VARCHAR},
      </if>
      <if test="codNacReport != null">
        cod_nac_report = #{codNacReport,jdbcType=INTEGER},
      </if>
      <if test="codGeometria != null">
        cod_geometria = #{codGeometria,jdbcType=INTEGER},
      </if>
      <if test="coordenadas != null">
        coordenadas = #{coordenadas,jdbcType=VARCHAR},
      </if>
      <if test="codTpoVia != null">
        cod_tpo_via = #{codTpoVia,jdbcType=INTEGER},
      </if>
      <if test="descTpoVia != null">
        desc_tpo_via = #{descTpoVia,jdbcType=VARCHAR},
      </if>
      <if test="descVia != null">
        desc_via = #{descVia,jdbcType=VARCHAR},
      </if>
      <if test="cdra != null">
        cdra = #{cdra,jdbcType=VARCHAR},
      </if>
      <if test="dpto != null">
        dpto = #{dpto,jdbcType=VARCHAR},
      </if>
      <if test="zona != null">
        zona = #{zona,jdbcType=VARCHAR},
      </if>
      <if test="subzona != null">
        subzona = #{subzona,jdbcType=VARCHAR},
      </if>
      <if test="descripcion != null">
        descripcion = #{descripcion,jdbcType=VARCHAR},
      </if>
      <if test="fecNotificacion != null">
        fec_notificacion = #{fecNotificacion,jdbcType=TIMESTAMP},
      </if>
      <if test="fecEvento != null">
        fec_evento = #{fecEvento,jdbcType=TIMESTAMP},
      </if>
      <if test="fecAtencion != null">
        fec_atencion = #{fecAtencion,jdbcType=TIMESTAMP},
      </if>
      <if test="fecCierre != null">
        fec_cierre = #{fecCierre,jdbcType=TIMESTAMP},
      </if>
      <if test="codSeveridad != null">
        cod_severidad = #{codSeveridad,jdbcType=INTEGER},
      </if>
      <if test="codEstado != null">
        cod_estado = #{codEstado,jdbcType=INTEGER},
      </if>
      <if test="codSubestado != null">
        cod_subestado = #{codSubestado,jdbcType=INTEGER},
      </if>
      <if test="codModalidad != null">
        cod_modalidad = #{codModalidad,jdbcType=INTEGER},
      </if>
      <if test="codMotivo != null">
        cod_motivo = #{codMotivo,jdbcType=INTEGER},
      </if>
      <if test="descMotivo != null">
        desc_motivo = #{descMotivo,jdbcType=VARCHAR},
      </if>
      <if test="tpoHallazgo != null">
        tpo_hallazgo = #{tpoHallazgo,jdbcType=VARCHAR},
      </if>
      <if test="tpoSexo != null">
        tpo_sexo = #{tpoSexo,jdbcType=VARCHAR},
      </if>
      <if test="estReg != null">
        est_reg = #{estReg,jdbcType=VARCHAR},
      </if>
      <if test="nroCasoVoxiva != null">
        nro_caso_voxiva = #{nroCasoVoxiva,jdbcType=INTEGER},
      </if>
      <if test="tipoVoxiva != null">
        tipo_voxiva = #{tipoVoxiva,jdbcType=VARCHAR},
      </if>
      <if test="subtipoVoxiva != null">
        subtipo_voxiva = #{subtipoVoxiva,jdbcType=VARCHAR},
      </if>
      <if test="tiempoCierre != null">
        tiempo_cierre = #{tiempoCierre,jdbcType=VARCHAR},
      </if>
      <if test="area != null">
        area = #{area,jdbcType=VARCHAR},
      </if>
      <if test="codDispOrigen != null">
        cod_disp_origen = #{codDispOrigen,jdbcType=INTEGER},
      </if>
      <if test="descDispOrigen != null">
        desc_disp_origen = #{descDispOrigen,jdbcType=VARCHAR},
      </if>
      <if test="flgHeridos != null">
        flg_heridos = #{flgHeridos,jdbcType=VARCHAR},
      </if>
      <if test="flgCallback != null">
        flg_callback = #{flgCallback,jdbcType=VARCHAR},
      </if>
      <if test="visible != null">
        visible = #{visible,jdbcType=VARCHAR},
      </if>
      <if test="usrRegistra != null">
        usr_registra = #{usrRegistra,jdbcType=VARCHAR},
      </if>
      <if test="usrModifica != null">
        usr_modifica = #{usrModifica,jdbcType=VARCHAR},
      </if>
      <if test="indLeido != null">
        ind_leido = #{indLeido,jdbcType=VARCHAR},
      </if>
      <if test="tpoOperador != null">
        tpo_operador = #{tpoOperador,jdbcType=INTEGER},
      </if>
      <if test="flgReasignado != null">
        flg_reasignado = #{flgReasignado,jdbcType=VARCHAR},
      </if>
      <if test="urlAudio != null">
        url_audio = #{urlAudio,jdbcType=VARCHAR},
      </if>
      <if test="param1 != null">
        param1 = #{param1,jdbcType=VARCHAR},
      </if>
      <if test="param2 != null">
        param2 = #{param2,jdbcType=VARCHAR},
      </if>
      <if test="numero != null">
        numero = #{numero,jdbcType=VARCHAR},
      </if>
      <if test="codArea != null">
        cod_area = #{codArea,jdbcType=INTEGER},
      </if>
      <if test="codZona != null">
        cod_zona = #{codZona,jdbcType=INTEGER},
      </if>
      <if test="codSubzona != null">
        cod_subzona = #{codSubzona,jdbcType=INTEGER},
      </if>
    </set>
    where id_incidencia = #{idIncidencia,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="pe.gob.miraflores.mobile.domain.mapaincidencias.MapaIncidenciaRegistro">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Feb 13 17:12:21 COT 2018.
    -->
    update mapa.geo_map_incidencia
    set cod_unidad = #{codUnidad,jdbcType=INTEGER},
      cod_caso = #{codCaso,jdbcType=INTEGER},
      cod_subcaso = #{codSubcaso,jdbcType=INTEGER},
      cod_medio = #{codMedio,jdbcType=INTEGER},
      cod_situacion = #{codSituacion,jdbcType=INTEGER},
      desc_unidad = #{descUnidad,jdbcType=VARCHAR},
      desc_caso = #{descCaso,jdbcType=VARCHAR},
      desc_subcaso = #{descSubcaso,jdbcType=VARCHAR},
      desc_medio = #{descMedio,jdbcType=VARCHAR},
      desc_situacion = #{descSituacion,jdbcType=VARCHAR},
      cod_unid_report = #{codUnidReport,jdbcType=INTEGER},
      nomb_report = #{nombReport,jdbcType=VARCHAR},
      telf_report = #{telfReport,jdbcType=VARCHAR},
      dir_report = #{dirReport,jdbcType=VARCHAR},
      cext_report = #{cextReport,jdbcType=VARCHAR},
      cod_nac_report = #{codNacReport,jdbcType=INTEGER},
      cod_geometria = #{codGeometria,jdbcType=INTEGER},
      coordenadas = #{coordenadas,jdbcType=VARCHAR},
      cod_tpo_via = #{codTpoVia,jdbcType=INTEGER},
      desc_tpo_via = #{descTpoVia,jdbcType=VARCHAR},
      desc_via = #{descVia,jdbcType=VARCHAR},
      cdra = #{cdra,jdbcType=VARCHAR},
      dpto = #{dpto,jdbcType=VARCHAR},
      zona = #{zona,jdbcType=VARCHAR},
      subzona = #{subzona,jdbcType=VARCHAR},
      descripcion = #{descripcion,jdbcType=VARCHAR},
      fec_notificacion = #{fecNotificacion,jdbcType=TIMESTAMP},
      fec_evento = #{fecEvento,jdbcType=TIMESTAMP},
      fec_atencion = #{fecAtencion,jdbcType=TIMESTAMP},
      fec_cierre = #{fecCierre,jdbcType=TIMESTAMP},
      cod_severidad = #{codSeveridad,jdbcType=INTEGER},
      cod_estado = #{codEstado,jdbcType=INTEGER},
      cod_subestado = #{codSubestado,jdbcType=INTEGER},
      cod_modalidad = #{codModalidad,jdbcType=INTEGER},
      cod_motivo = #{codMotivo,jdbcType=INTEGER},
      desc_motivo = #{descMotivo,jdbcType=VARCHAR},
      tpo_hallazgo = #{tpoHallazgo,jdbcType=VARCHAR},
      tpo_sexo = #{tpoSexo,jdbcType=VARCHAR},
      est_reg = #{estReg,jdbcType=VARCHAR},
      nro_caso_voxiva = #{nroCasoVoxiva,jdbcType=INTEGER},
      tipo_voxiva = #{tipoVoxiva,jdbcType=VARCHAR},
      subtipo_voxiva = #{subtipoVoxiva,jdbcType=VARCHAR},
      tiempo_cierre = #{tiempoCierre,jdbcType=VARCHAR},
      area = #{area,jdbcType=VARCHAR},
      cod_disp_origen = #{codDispOrigen,jdbcType=INTEGER},
      desc_disp_origen = #{descDispOrigen,jdbcType=VARCHAR},
      flg_heridos = #{flgHeridos,jdbcType=VARCHAR},
      flg_callback = #{flgCallback,jdbcType=VARCHAR},
      visible = #{visible,jdbcType=VARCHAR},
      usr_registra = #{usrRegistra,jdbcType=VARCHAR},
      usr_modifica = #{usrModifica,jdbcType=VARCHAR},
      ind_leido = #{indLeido,jdbcType=VARCHAR},
      tpo_operador = #{tpoOperador,jdbcType=INTEGER},
      flg_reasignado = #{flgReasignado,jdbcType=VARCHAR},
      url_audio = #{urlAudio,jdbcType=VARCHAR},
      param1 = #{param1,jdbcType=VARCHAR},
      param2 = #{param2,jdbcType=VARCHAR},
      numero = #{numero,jdbcType=VARCHAR},
      cod_area = #{codArea,jdbcType=INTEGER},
      cod_zona = #{codZona,jdbcType=INTEGER},
      cod_subzona = #{codSubzona,jdbcType=INTEGER}
    where id_incidencia = #{idIncidencia,jdbcType=INTEGER}
  </update>
    
  
  
  <!-- ****************************************************************************** -->
  <!-- PROCEDIMIENTOS PERSONALIZADOS -->
  

	
     
     <!-- insertar nueva incidencia -->
    
    <!-- REVISAR ESTE PROCEDIMIENTO, YA NO SE USA --> 
    <!-- <insert id="insertIncidenciaSelective" parameterType="pe.gob.miraflores.mobile.mapaincidencias.domain.Incidencia">
    
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 10 12:32:50 COT 2016.
   
    
    <selectKey keyProperty="codIncidencia" resultType="int" order="BEFORE" >
		select (case when max(cod_incidencia) is null then 1 else max(cod_incidencia)+1 end) as value from mapa.incidencia  
	</selectKey>
	
    insert into mapa.geo_incidencia_map
    <trim prefix="(" suffix=")" suffixOverrides=",">
      
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      
    </trim>
  </insert> -->
     
  
  
  
	<!-- RESULT MAP PARA LISTAR ALERTAS -->
	<resultMap id="ResultMapIncidenciaList" type="hashmap">
			<id column="id_incidencia" jdbcType="INTEGER" property="idIncidencia" />
			<result column="cod_unidad" jdbcType="INTEGER" property="codUnidad" />
			<result column="cod_caso" jdbcType="INTEGER" property="codCaso" />
			<result column="cod_subcaso" jdbcType="INTEGER" property="codSubcaso" />
			<result column="cod_medio" jdbcType="INTEGER" property="codMedio" />
			<result column="cod_situacion" jdbcType="INTEGER" property="codSituacion" />
			<result column="desc_unidad" jdbcType="VARCHAR" property="descUnidad" />
			<result column="desc_caso" jdbcType="VARCHAR" property="descCaso" />
			<result column="desc_subcaso" jdbcType="VARCHAR" property="descSubcaso" />
			<result column="desc_medio" jdbcType="VARCHAR" property="descMedio" />
			<result column="desc_situacion" jdbcType="VARCHAR" property="descSituacion" />
			<result column="nomb_report" jdbcType="VARCHAR" property="nombReport" />
			<result column="telf_report" jdbcType="VARCHAR" property="telfReport" />
			<result column="coordenadas" jdbcType="VARCHAR" property="coordenadas" />
			<result column="area" jdbcType="VARCHAR" property="area" />
			<result column="fec_notificacion" jdbcType="TIMESTAMP" property="fecNotificacion" />
			<result column="fec_evento" jdbcType="TIMESTAMP" property="fecEvento" />
			<result column="fec_atencion" jdbcType="TIMESTAMP" property="fecAtencion" />
			<result column="est_reg" jdbcType="VARCHAR" property="estReg" />
			<result column="nro_caso_voxiva" jdbcType="INTEGER" property="nroCasoVoxiva" />
			<result column="visible" jdbcType="VARCHAR" property="visible" />	
			<result column="ind_leido" jdbcType="VARCHAR" property="indLeido" />	
			<result column="usr_registra" jdbcType="VARCHAR" property="usrRegistra" />
			<result column="usr_modifica" jdbcType="VARCHAR" property="usrModifica" />
			<result column="tpo_operador" jdbcType="INTEGER" property="tpoOperador" />
	</resultMap>

	<!-- SELECT PARA LISTAR EN EL MAPA DE INCIDENCIAS -->
	<select id="selectMapaIncidencia" parameterType="HashMap" resultMap="ResultMapIncidenciaList" >
			select 
					id_incidencia,cod_unidad,cod_caso,cod_subcaso,cod_medio,cod_situacion,
					desc_unidad,desc_caso,desc_subcaso,desc_medio,desc_situacion,
					nomb_report,telf_report,coordenadas,area,fec_notificacion,fec_evento,fec_atencion
					est_reg,nro_caso_voxiva,visible,ind_leido,usr_registra,usr_modifica,tpo_operador
			from mapa.geo_map_incidencia
			where 1=1 
					and coordenadas is not null
					and est_reg = 'A'
					and (cod_situacion is null or cod_situacion=873)
		  	<if test="id_incidencia != null">
					and id_incidencia = ${id_incidencia}
		  	</if>
		  	<if test="nro_caso_voxiva != null">
					and nro_caso_voxiva = ${nro_caso_voxiva}
		  	</if>
		  	<if test="area != null">
					and area = '${area}'
		  	</if>
		  	<if test="tpoOperador != null">
					and tpo_operador = ${tpoOperador}
		  	</if>
		  	<if test="rol == 902 and usuario != null" >
		         	and upper(usr_registra) = upper('${usuario}')
			</if>
		  
	</select>
	
	
	
	<resultMap id="ResultMapIncidenciaTimelap" type="pe.gob.miraflores.mobile.domain.mapaincidencias.MapaIncidenciaRegistro">
			<id column="id_incidencia" jdbcType="INTEGER" property="idIncidencia" />
			<result column="cod_unidad" jdbcType="INTEGER" property="codUnidad" />
			<result column="cod_caso" jdbcType="INTEGER" property="codCaso" />
			<result column="cod_subcaso" jdbcType="INTEGER" property="codSubcaso" />
			<result column="cod_medio" jdbcType="INTEGER" property="codMedio" />
			<result column="cod_situacion" jdbcType="INTEGER" property="codSituacion" />
			<result column="desc_unidad" jdbcType="VARCHAR" property="descUnidad" />
			<result column="desc_caso" jdbcType="VARCHAR" property="descCaso" />
			<result column="desc_subcaso" jdbcType="VARCHAR" property="descSubcaso" />
			<result column="desc_medio" jdbcType="VARCHAR" property="descMedio" />
			<result column="desc_situacion" jdbcType="VARCHAR" property="descSituacion" />
			<result column="coordenadas" jdbcType="VARCHAR" property="coordenadas" />
			<result column="area" jdbcType="VARCHAR" property="area" />
			<result column="zona" jdbcType="VARCHAR" property="zona" />
			<result column="subzona" jdbcType="VARCHAR" property="subzona" />
			<result column="desc_via" jdbcType="VARCHAR" property="descVia" />
			<result column="cdra" jdbcType="VARCHAR" property="cdra" />
			<result column="descripcion" jdbcType="VARCHAR" property="descripcion" />
			<result column="fec_notificacion" jdbcType="TIMESTAMP" property="fecNotificacion" />
			<result column="fec_evento" jdbcType="TIMESTAMP" property="fecEvento" />
			<result column="fec_atencion" jdbcType="TIMESTAMP" property="fecAtencion" />
			<result column="est_reg" jdbcType="VARCHAR" property="estReg" />
			<result column="nro_caso_voxiva" jdbcType="INTEGER" property="nroCasoVoxiva" />
			<result column="visible" jdbcType="VARCHAR" property="visible" />	
			<result column="ind_leido" jdbcType="VARCHAR" property="indLeido" />	
			<result column="usr_registra" jdbcType="VARCHAR" property="usrRegistra" />
			<result column="usr_modifica" jdbcType="VARCHAR" property="usrModifica" />
			<result column="tpo_operador" jdbcType="INTEGER" property="tpoOperador" />
			
	</resultMap>
	
	<!-- Sin filtro de fec_evento -->
	<!-- <select id="selectMapaIncidenciaTimelap" parameterType="HashMap" resultMap="ResultMapIncidenciaTimelap" >
			select 
						id_incidencia,
						cod_unidad,
						cod_caso,
						cod_subcaso,
						cod_medio,
						cod_situacion,
						desc_unidad,
						desc_caso,
						desc_subcaso,
						desc_medio,
						desc_situacion,
						coordenadas,
						area,
						zona,
						subzona,
						desc_via,
						cdra,
						descripcion,
						fec_notificacion,
						fec_evento,
						fec_atencion,
						est_reg,
						nro_caso_voxiva,
						visible,ind_leido,usr_registra,usr_modifica,tpo_operador
			from mapa.geo_map_incidencia
			where 1=1
					and coordenadas is not null
		  	<if test="id_incidencia != null">
					and id_incidencia = ${id_incidencia}
		  	</if>
		  	<if test="nro_caso_voxiva != null">
					and nro_caso_voxiva = ${nro_caso_voxiva}
		  	</if>
	</select> -->
	
	<!-- Con filtro de fec_evento -->
	<select id="selectMapaIncidenciaTimelap" parameterType="HashMap" resultMap="ResultMapIncidenciaTimelap" >
			select 
						id_incidencia,
						cod_unidad,
						cod_caso,
						cod_subcaso,
						cod_medio,
						cod_situacion,
						desc_unidad,
						desc_caso,
						desc_subcaso,
						desc_medio,
						desc_situacion,
						coordenadas,
						area,
						zona,
						subzona,
						desc_via,
						cdra,
						descripcion,
						fec_notificacion,
						fec_evento,
						fec_atencion,
						est_reg,
						nro_caso_voxiva,
						visible,ind_leido,usr_registra,usr_modifica,tpo_operador
			from mapa.geo_map_incidencia
			where 1=1
					and coordenadas is not null and fec_evento is not null
		  	<if test="id_incidencia != null">
					and id_incidencia = ${id_incidencia}
		  	</if>
		  	<if test="nro_caso_voxiva != null">
					and nro_caso_voxiva = ${nro_caso_voxiva}
		  	</if>
	</select>
	
	
	
	
	<resultMap id="ResultMapIncidenciaExposicion" type="pe.gob.miraflores.mobile.domain.mapaincidencias.MapaIncidenciaRegistro">
			<id column="id_incidencia" jdbcType="INTEGER" property="idIncidencia" />
			<result column="cod_unidad" jdbcType="INTEGER" property="codUnidad" />
			<result column="cod_caso" jdbcType="INTEGER" property="codCaso" />
			<result column="cod_subcaso" jdbcType="INTEGER" property="codSubcaso" />
			<result column="cod_medio" jdbcType="INTEGER" property="codMedio" />
			<result column="cod_situacion" jdbcType="INTEGER" property="codSituacion" />
			<result column="desc_unidad" jdbcType="VARCHAR" property="descUnidad" />
			<result column="desc_caso" jdbcType="VARCHAR" property="descCaso" />
			<result column="desc_subcaso" jdbcType="VARCHAR" property="descSubcaso" />
			<result column="desc_medio" jdbcType="VARCHAR" property="descMedio" />
			<result column="desc_situacion" jdbcType="VARCHAR" property="descSituacion" />
			<result column="coordenadas" jdbcType="VARCHAR" property="coordenadas" />
			<result column="area" jdbcType="VARCHAR" property="area" />
			<result column="zona" jdbcType="VARCHAR" property="zona" />
			<result column="subzona" jdbcType="VARCHAR" property="subzona" />
			<result column="desc_via" jdbcType="VARCHAR" property="descVia" />
			<result column="cdra" jdbcType="VARCHAR" property="cdra" />
			<result column="descripcion" jdbcType="VARCHAR" property="descripcion" />
			<result column="fec_notificacion" jdbcType="TIMESTAMP" property="fecNotificacion" />
			<result column="fec_evento" jdbcType="TIMESTAMP" property="fecEvento" />
			<result column="fec_atencion" jdbcType="TIMESTAMP" property="fecAtencion" />
			<result column="est_reg" jdbcType="VARCHAR" property="estReg" />
			<result column="nro_caso_voxiva" jdbcType="INTEGER" property="nroCasoVoxiva" />
			<result column="visible" jdbcType="VARCHAR" property="visible" />	
			<result column="ind_leido" jdbcType="VARCHAR" property="indLeido" />	
			<result column="usr_registra" jdbcType="VARCHAR" property="usrRegistra" />
			<result column="usr_modifica" jdbcType="VARCHAR" property="usrModifica" />
			<result column="tpo_operador" jdbcType="INTEGER" property="tpoOperador" />
			<result column="param1" jdbcType="VARCHAR" property="param1" />
    		<result column="param2" jdbcType="VARCHAR" property="param2" />
			
	</resultMap>
	
	<select id="selectMapaIncidenciaExposicion" parameterType="HashMap" resultMap="ResultMapIncidenciaExposicion" >
			select 
						id_incidencia,
						cod_unidad,
						cod_caso,
						cod_subcaso,
						cod_medio,
						cod_situacion,
						desc_unidad,
						desc_caso,
						desc_subcaso,
						desc_medio,
						desc_situacion,
						coordenadas,
						area,
						zona,
						subzona,
						desc_via,
						cdra,
						descripcion,
						fec_notificacion,
						fec_evento,
						fec_atencion,
						est_reg,
						nro_caso_voxiva,
						visible,ind_leido,usr_registra,usr_modifica,tpo_operador,
						param1,
						param2
			from mapa.geo_map_incidencia
			where coordenadas is not null 
				<if test="tpoExpo != null and tpoExpo!=1025 and tpoExpo!=1026 and fecExpoDesde != null and fecExpoHasta != null" >
					and fec_evento between 
								to_timestamp('${fecExpoDesde}','dd/mm/yyyy') and
								to_timestamp('${fecExpoHasta}','dd/mm/yyyy') + '1 day' 
					and id_incidencia in (select distinct id_incidencia from mapa.geo_img_incidencia where tpo_expo=${tpoExpo})
		  		</if>	
		  		<if test="area != null">
					and area = '${area}'
		  		</if>
		  		<if test="idIncidencia != null">
					and id_incidencia = ${idIncidencia}
		  		</if>
	</select>
	
	
	<select id="selectListaExposicion" parameterType="HashMap" resultType="hashMap" >
			select id_incidencia as "name", concat( id_incidencia,' - '||param1) as "name2"
			from mapa.geo_map_incidencia
			where coordenadas is not null
				<if test="tpoExpo != null and fecExpoDesde != null and fecExpoHasta != null" >
					and fec_evento between 
								to_timestamp('${fecExpoDesde}','dd/mm/yyyy') and
								to_timestamp('${fecExpoHasta}','dd/mm/yyyy') + '1 day' 
					and id_incidencia in (select distinct id_incidencia from mapa.geo_img_incidencia where tpo_expo=${tpoExpo})
		  		</if>
		  		<if test="area != null">
					and area = '${area}'
		  		</if>
		  		<if test="idIncidencia != null">
					and id_incidencia = ${idIncidencia}
		  		</if>
		  	order by 1
	</select>
	
	
	<select id="selectMapaIncidenciaWithImage" parameterType="HashMap" resultMap="ResultMapIncidenciaList" >
			select 
					id_incidencia,cod_unidad,cod_caso,cod_subcaso,cod_medio,cod_situacion,
					desc_unidad,desc_caso,desc_subcaso,desc_medio,desc_situacion,
					nomb_report,telf_report,coordenadas,area,fec_notificacion,fec_evento,fec_atencion
					est_reg,nro_caso_voxiva,visible,ind_leido,usr_registra,usr_modifica,tpo_operador
			from mapa.geo_map_incidencia
			where 1=1
					and coordenadas is not null
					and est_reg = 'A'
					and (cod_situacion is null or cod_situacion=873)
		  	<if test="id_incidencia != null">
					and id_incidencia = ${id_incidencia}
		  	</if>
		  	<if test="nro_caso_voxiva != null">
					and nro_caso_voxiva = ${nro_caso_voxiva}
		  	</if>
		  	<if test="area != null">
					and area = '${area}'
		  	</if>
		  	<if test="tpoOperador != null">
					and tpo_operador = ${tpoOperador}
		  	</if>
		  	<if test="rol == 902 and usuario != null" >
		         	and upper(usr_registra) = upper('${usuario}')
			</if>
		  
	</select>
	
	
	<!-- SELECT PARA LISTAR EN BANDEJA DE INCIDENCIAS -->
	<select id="selectBandejaIncidencia" parameterType="HashMap" resultMap="ResultMapIncidenciaList">
			<!-- select * from ( -->
					select  
							id_incidencia,cod_unidad,cod_caso,cod_subcaso,cod_medio,cod_situacion,
							desc_unidad,desc_caso,desc_subcaso,desc_medio,desc_situacion,
							nomb_report,telf_report,coordenadas,fec_notificacion,fec_evento,
							est_reg,nro_caso_voxiva,visible,usr_registra,usr_modifica
							row_number() over (order by id_incidencia desc) as row_next
					from 
						mapa.geo_map_incidencia 
					where
						est_reg='A'
						        <if test="codUnidad != null">
							       and cod_unidad = #{codUnidad,jdbcType=INTEGER}
							    </if> 
						        <if test="codCaso != null">
							        and cod_caso = #{codCaso,jdbcType=INTEGER}
							    </if> 
							    <if test="codSubcaso != null">
							        and cod_subcaso = #{codSubcaso,jdbcType=INTEGER}
							    </if>
							    <if test="codSituacion != null">
							        and codSituacion = #{codSituacion,jdbcType=INTEGER}
							    </if> 
							    <if test="codMedio != null">
							        and cod_medio = #{codMedio,jdbcType=INTEGER}
							    </if>  
			   				    <if test="nroCasoVoxiva != null">
							        and nro_caso_voxiva = #{nroCasoVoxiva,jdbcType=INTEGER}
							    </if>  
							    <if test="fecNotificacion != null">
						         	 and cast(fec_notificacion as timestamp) <![CDATA[ >= ]]> #{fecNotificacion,jdbcType=TIMESTAMP}		
								</if>
								<if test="fecEvento != null">
						         	and cast(fec_evento as timestamp) <![CDATA[ <= ]]> #{fecEvento,jdbcType=TIMESTAMP}
								</if> 
								<if test="rol == 902 and usuario != null" >
						         	and upper(usr_registra) = '#{usrRegistra,jdbcType=VARCHAR}'
								</if>
			<!-- )as temp where row_next between #{START} and #{LIMIT}   -->
	</select>


	 <select id="selectBandejaIncidenciaTodo" parameterType="HashMap" resultMap="ResultMapIncidenciaList">
     		select  
					id_incidencia,cod_unidad,cod_caso,cod_subcaso,cod_medio,cod_situacion,
					desc_unidad,desc_caso,desc_subcaso,desc_medio,desc_situacion,
					nomb_report,telf_report,coordenadas,fec_notificacion,fec_evento,
					est_reg,nro_caso_voxiva,visible,
					row_number() over (order by fec_notificacion desc) as row_next
			from mapa.geo_map_incidencia 
			where est_reg='A'
			<if test="cod_unidad != null">
				and cod_unidad = ${cod_unidad}
			</if>
			<if test="cod_caso != null">
				and cod_caso = ${cod_caso}
			</if>
			<if test="cod_subcaso != null">
				and cod_subcaso = ${cod_subcaso}
			</if>
			<if test="cod_medio != null">
				and cod_medio = ${cod_medio}
			</if>
			<if test="cod_situacion != null">
				and cod_situacion = ${cod_situacion}
			</if>
  </select>

	
		<resultMap id="ResultMapIncidenciaBandeja" type="hashmap">
			<id column="id_incidencia" jdbcType="INTEGER" property="idIncidencia" />
			<result column="cod_unidad" jdbcType="INTEGER" property="codUnidad" />
			<result column="cod_caso" jdbcType="INTEGER" property="codCaso" />
			<result column="cod_subcaso" jdbcType="INTEGER" property="codSubcaso" />
			<result column="cod_medio" jdbcType="INTEGER" property="codMedio" />
			<result column="cod_situacion" jdbcType="INTEGER" property="codSituacion" />
			<result column="desc_unidad" jdbcType="VARCHAR" property="descUnidad" />
			<result column="desc_caso" jdbcType="VARCHAR" property="descCaso" />
			<result column="desc_subcaso" jdbcType="VARCHAR" property="descSubcaso" />
			<result column="desc_medio" jdbcType="VARCHAR" property="descMedio" />
			<result column="desc_situacion" jdbcType="VARCHAR" property="descSituacion" />
			<result column="nomb_report" jdbcType="VARCHAR" property="nombReport" />
			<result column="telf_report" jdbcType="VARCHAR" property="telfReport" />
			<result column="coordenadas" jdbcType="VARCHAR" property="coordenadas" />
			<result column="desc_via" jdbcType="VARCHAR" property="descVia" />
			<result column="cdra" jdbcType="VARCHAR" property="cdra" />
			<result column="zona" jdbcType="VARCHAR" property="zona" />
			<result column="subzona" jdbcType="VARCHAR" property="subzona" />
			<result column="area" jdbcType="VARCHAR" property="area" />
			<result column="descripcion" jdbcType="VARCHAR" property="descripcion" />
			<result column="fec_notificacion" jdbcType="TIMESTAMP" property="fecNotificacion" />
			<result column="fec_evento" jdbcType="TIMESTAMP" property="fecEvento" />
			<result column="fec_atencion" jdbcType="TIMESTAMP" property="fecAtencion" />
			<result column="fec_cierre" jdbcType="TIMESTAMP" property="fecCierre" />
			<result column="cod_severidad" jdbcType="INTEGER" property="codSeveridad" />
			<result column="cod_estado" jdbcType="INTEGER" property="codEstado" />
			<result column="cod_subestado" jdbcType="INTEGER" property="codSubestado" />
			<result column="cod_modalidad" jdbcType="INTEGER" property="codModalidad" />
			<result column="desc_motivo" jdbcType="VARCHAR" property="descMotivo" />
			<result column="tpo_hallazgo" jdbcType="VARCHAR" property="tpoHallazgo" />
			<result column="est_reg" jdbcType="VARCHAR" property="estReg" />
			<result column="nro_caso_voxiva" jdbcType="INTEGER" property="nroCasoVoxiva" />
			<result column="visible" jdbcType="VARCHAR" property="visible" />
			<result column="usr_registra" jdbcType="VARCHAR" property="usrRegistra" />
			<result column="usr_modifica" jdbcType="VARCHAR" property="usrModifica" />
			<result column="tpo_operador" jdbcType="INTEGER" property="tpoOperador" />
			<result column="flg_reasignado" jdbcType="INTEGER" property="flgReasignado" />
			<result column="url_audio" jdbcType="VARCHAR" property="urlAudio" />
			<result column="param1" jdbcType="VARCHAR" property="param1" />
			<result column="param2" jdbcType="VARCHAR" property="param2" />
	</resultMap>
			
	
 	<select id="selectBandejaIncidenciaPaginada" parameterType="HashMap" resultMap="ResultMapIncidenciaBandeja">
		select * from (
	  		select  
					id_incidencia,
					cod_unidad,
					cod_caso,
					cod_subcaso,
					cod_medio,
					cod_situacion,
					desc_unidad,
					desc_caso,
					desc_subcaso,
					desc_medio,
					desc_situacion,
					nomb_report,
					telf_report,
					coordenadas,
					desc_via,
					cdra,
					zona,
					subzona,
					area,
					descripcion,
					fec_notificacion,
					fec_evento,
					fec_atencion,
					fec_cierre,
					cod_severidad,
					cod_estado,
					cod_subestado,
					cod_modalidad,
					desc_motivo,
					tpo_hallazgo,
					est_reg,
					nro_caso_voxiva,
					visible,
					usr_registra,
					usr_modifica,
					tpo_operador,
					flg_reasignado,
					url_audio,
					param1,
					param2,
					row_number() over (order by fec_notificacion desc) as row_next
			from mapa.geo_map_incidencia 
			where est_reg='A'
	    	<if test="id_incidencia != null">
				and id_incidencia = ${id_incidencia}
			</if>
			<if test="nro_caso_voxiva != null">
				and nro_caso_voxiva = ${nro_caso_voxiva}
			</if>
	    	<if test="cod_unidad != null">
				and cod_unidad = ${cod_unidad}
			</if>
			<if test="cod_caso != null">
				and cod_caso = ${cod_caso}
			</if>
			<if test="cod_subcaso != null">
				and cod_subcaso = ${cod_subcaso}
			</if>
			<if test="cod_medio != null">
				and cod_medio = ${cod_medio}
			</if>
			<if test="cod_situacion != null">
				and cod_situacion = ${cod_situacion}
			</if>
			<if test="rol == 902 and usuario != null" >
	         	and usr_registra = upper('${usuario}')
			</if>
			<if test="desde != null">
				and fec_notificacion<![CDATA[ >= ]]>to_date('${desde}', 'dd/mm/yyyy')
			</if> 
			<if test="hasta != null">
				and fec_notificacion<![CDATA[ <= ]]>to_date('${hasta}', 'dd/mm/yyyy') + 1
			</if> 
			<if test="nomb_report != null">
				and upper(nomb_report) like '%'||upper('${nomb_report}')||'%'
			</if> 
			<if test="telf_report != null">
				and telf_report = '${telf_report}'
			</if> 
			<if test="desc_via != null">
				and upper(desc_via) like '%'||upper('${desc_via}')||'%'
			</if> 
			<if test="cdra != null">
				and cdra = '${cdra}'
			</if> 
			<if test="tpo_operador != null">
				and tpo_operador = ${tpo_operador}
			</if>
			<if test="flg_reasignado != null">
				and flg_reasignado = '${flg_reasignado}'
			</if>
		) as temp 
		where  row_next between #{START} and #{LIMIT}  
 	</select>
 	
 	<select id="countBandejaIncidenciaPaginada" parameterType="HashMap" resultType="java.lang.Integer">
  		select count(*) from mapa.geo_map_incidencia 
		where est_reg='A'
	    	<if test="id_incidencia != null">
				and id_incidencia = ${id_incidencia}
			</if>
			<if test="nro_caso_voxiva != null">
				and nro_caso_voxiva = ${nro_caso_voxiva}
			</if>
	    	<if test="cod_unidad != null">
				and cod_unidad = ${cod_unidad}
			</if>
			<if test="cod_caso != null">
				and cod_caso = ${cod_caso}
			</if>
			<if test="cod_subcaso != null">
				and cod_subcaso = ${cod_subcaso}
			</if>
			<if test="cod_medio != null">
				and cod_medio = ${cod_medio}
			</if>
			<if test="cod_situacion != null">
				and cod_situacion = ${cod_situacion}
			</if>
			<if test="rol == 902 and usuario != null" >
	         	and usr_registra = upper('${usuario}')
			</if>
			<if test="desde != null">
				and fec_notificacion<![CDATA[ >= ]]>to_date('${desde}', 'dd/mm/yyyy')
			</if> 
			<if test="hasta != null">
				and fec_notificacion<![CDATA[ <= ]]>to_date('${hasta}', 'dd/mm/yyyy') + 1
			</if> 
			<if test="nomb_report != null">
				and upper(nomb_report) like '%'||upper('${nomb_report}')||'%'
			</if> 
			<if test="telf_report != null">
				and telf_report = '${telf_report}'
			</if> 
			<if test="desc_via != null">
				and upper(desc_via) like '%'||upper('${desc_via}')||'%'
			</if> 
			<if test="cdra != null">
				and cdra = '${cdra}'
			</if> 
			<if test="tpo_operador != null">
				and tpo_operador = ${tpo_operador}
			</if>
			<if test="flg_reasignado != null">
				and flg_reasignado = '${flg_reasignado}'
			</if>
 	</select>

	
  <select id="selectIncidenciaForBitacora" parameterType="java.lang.Integer" resultType="hashMap">
		
  </select>
	
  
  <select id="selectJson2" parameterType="HashMap" resultType="hashMap">
		select * from mapa.json_prueba2
		where 1=1
			<if test="inicio != null">
				and time<![CDATA[ >= ]]> '#{inicio}'
			</if>
			<if test="fin != null">
				and fecha<![CDATA[ <= ]]> '#{fin}'
			</if>
  </select>

  <select id="selectDynamicJson" parameterType="HashMap" resultType="hashMap">
    <!--select * from mapa.json_prueba-->
    select
    	count(*) as N
    <if test="tsserie != null">
		,fecha as fecha
	</if> 
	<if test="tspie != null">
		,tipo_accidente as tipoAccidente   
	</if>
    from mapa.accidente_seguridad
	where fecha<![CDATA[ >= ]]>to_date('${fecini}', 'dd/mm/yyyy') and fecha<![CDATA[ <= ]]>to_date('${fecfin}', 'dd/mm/yyyy')
	
	<if test="tsserie != null">
		group by fecha
		order by fecha
	</if>
	<if test="tspie != null">
		group by tipo_accidente
		order by tipo_accidente  
	</if>
    
  </select>
  
  <select id="selectCamarasVideoVigilancia" parameterType="HashMap" resultType="HashMap">
          select * from mapa.geo_map_camara where est_reg='A'
          	<if test="area != null">
				and area='${area}'
			</if>
  </select>
  
  <!-- CONSULTAS PARA ESTADISTICAS INTEGRADAS -->

	<resultMap id="ResultMapDataPrueba" type="HashMap">
		<id column="id" jdbcType="VARCHAR" property="tiempo" />
		<result column="cod_unidad" jdbcType="INTEGER" property="codUnidad" />
		<result column="cod_caso" jdbcType="INTEGER" property="codCaso" />
		<result column="cod_subcaso" jdbcType="INTEGER" property="codSubcaso" />
		<result column="desc_unidad" jdbcType="INTEGER" property="descUnidad" />
		<result column="desc_caso" jdbcType="INTEGER" property="descCaso" />
		<result column="desc_subcaso" jdbcType="INTEGER" property="descSubcaso" />
		<result column="fecha" jdbcType="INTEGER" property="fecha" />
		<result column="latitud" jdbcType="INTEGER" property="latitud" />
		<result column="longitud" jdbcType="INTEGER" property="longitud" />
		<result column="coordenadas" jdbcType="INTEGER" property="coordenadas" />
	</resultMap>

	<select id="selectAllData" parameterType="HashMap" resultMap="ResultMapDataPrueba">
		select *
		from mapa.estadistica_prueba
		where 1=1 
			<if test="fecDesde != null">
				and fecha<![CDATA[ >= ]]>to_date('${fecDesde}', 'dd/mm/yyyy')
			</if> 
			<if test="fecHasta != null">
				and fecha<![CDATA[ <= ]]>to_date('${fecHasta}', 'dd/mm/yyyy')
			</if> 
			<if test="codUnidad != null">
				and cod_unidad = #{codUnidad,jdbcType=INTEGER}
		    </if> 
		    <if test="codCaso != null">
				and cod_unidad = #{codUnidad,jdbcType=INTEGER}
		    </if>
	</select>
	
<!-- CONSTRUCCION DE SERIE CHART -->


	<select id="selectData" parameterType="HashMap" resultType="hashMap">
<!-- 		select 
				id as "id",
				id_voxiva as "idVoxiva",
				unidad as "unidad",
				caso as "caso",
				subcaso as "subcaso",
				fecha as "fecha",
				hora as "hora",
				dia as "dia",
				mes as "mes",
				anio as "anio",
				valor as "valor",
				estado as "estado",
				subestado as "subestado",
				area as "area",
				zona as "zona",
				subzona as "subzona",
				tpo_via as "tpoVia",
				nomb_via as "nombVia",
				cdra as "cdra",
				coordenadas as "coordenadas",
				desc_unidad as "descUnidad",
				desc_caso as "descCaso",
				desc_subcaso as "descSubcaso"
		from mapa.geo_map_estadistica order by fecha -->
		<choose>
			<when test="codUnidad != null and codCaso != null">
				select cod_subcaso as cod, desc_subcaso as desc, valor as cant from mapa.geo_map_estadistica
			</when>
			<when test="codUnidad != null and codCaso == null">
				select cod_caso as cod, desc_caso as desc, valor as cant from mapa.geo_map_estadistica
			</when>
			<otherwise>
				select cod_unidad as cod, desc_unidad as desc, valor as cant from mapa.geo_map_estadistica
			</otherwise>
		</choose>
				where 1=1 
					<if test="fecDesde != null">
						and fecha<![CDATA[ >= ]]>to_date('${fecDesde}', 'dd/mm/yyyy')
					</if> 
					<if test="fecHasta != null">
						and fecha<![CDATA[ <= ]]>to_date('${fecHasta}', 'dd/mm/yyyy') + 1
					</if> 
					<if test="codUnidad != null">
						and cod_unidad = ${codUnidad}
				    </if> 
				    <if test="codCaso != null">
						and cod_caso = ${codCaso}
				    </if>
		<!-- <choose>
			<when test="codUnidad != null and codCaso != null">
				group by cod_subcaso, desc_subcaso
				order by cod_subcaso
			</when>
			<when test="codUnidad != null and codCaso == null">
				group by cod_caso, desc_caso
				order by cod_caso
			</when>
			<otherwise>
				group by cod_unidad, desc_unidad
				order by cod_unidad
			</otherwise>
		</choose> -->
	</select>
	
	<resultMap id="ResultMapSerie" type="HashMap">
		<id column="tiempo" jdbcType="VARCHAR" property="tiempo" />
		<result column="serie" jdbcType="INTEGER" property="serie" />
	</resultMap>
		
 	<select id="selectSerie" parameterType="HashMap" resultType="hashMap">
		select a.fec "tiempo", case when b.serie is null then 0 else b.serie end as "serie" 
		from
			(
				select cast(generate_series(
					<choose>
						<when test="fecDesde != null ">to_date('${fecDesde}','dd/mm/yyyy'),</when>
						<otherwise>timestamp '2017-01-01',</otherwise>
					</choose>
					<choose>
						<when test="fecHasta != null ">to_date('${fecHasta}','dd/mm/yyyy'),</when>
						<otherwise>current_timestamp,</otherwise>
					</choose>
					'1 days') as date) as "fec"
			) as a
		left join
			(
				select cast(fecha as date) as "fec", count(valor) as "serie" from mapa.geo_map_estadistica 
				where 1=1 and cod_unidad is not null
						<if test="fecDesde != null">
							and fecha<![CDATA[ >= ]]> cast(to_date('${fecDesde}','dd/mm/yyyy') as timestamp)
						</if>
						<if test="fecHasta != null">
							and fecha<![CDATA[ <= ]]> cast(to_date('${fecHasta}','dd/mm/yyyy') + 1 as timestamp)
						</if>
						<if test="codUnidad != null">
							and cod_unidad = ${codUnidad}
					    </if>
					    <if test="codCaso != null">
							and cod_caso = ${codCaso}
					    </if> 
					    <if test="codSubaso != null">
							and cod_subaso = ${codSubaso}
					    </if>	
					    
					    <if test="area != null">
							and area = '${area}'
					    </if>
					    <if test="zona != null">
							and zona = '${zona}'
					    </if>
					    <if test="subzona != null">
							and subzona = '${subzona}'
					    </if>
					    <if test="estado != null">
							and cod_estado = ${estado}
					    </if>
					    <if test="subestado != null">
							and cod_subestado = ${subestado}
					    </if>	
				group by cast(fecha as date) order by "fec"
			) as b
		on a.fec=b.fec
	</select> 


<!-- CONSTRUCCION DE PIE CHART -->

	<resultMap id="ResultMapPie" type="HashMap">
		<id column="cod" jdbcType="INTEGER" property="cod" />
		<result column="desc" jdbcType="VARCHAR" property="desc" />
		<result column="cant" jdbcType="INTEGER" property="cant" />
	</resultMap>
	
	<select id="selectPie" parameterType="HashMap" resultType="hashMap">
		<choose>
			<when test="codUnidad != null and codCaso != null">
				select cod_subcaso as cod, desc_subcaso as desc,
			</when>
			<when test="codUnidad != null and codCaso == null">
				select cod_caso as cod, desc_caso as desc,
			</when>
			<otherwise>
				select cod_unidad as cod, desc_unidad as desc,
			</otherwise>
		</choose>
				count(valor) as cant,
				round(cast(count(valor) as numeric)/cast(
															(	select count(*) from mapa.geo_map_estadistica
																where 1=1 and cod_unidad is not null
																	<if test="fecDesde != null">
																		and fecha<![CDATA[ >= ]]>to_date('${fecDesde}', 'dd/mm/yyyy')
																	</if> 
																	<if test="fecHasta != null">
																		and fecha<![CDATA[ <= ]]>to_date('${fecHasta}', 'dd/mm/yyyy') + 1
																	</if> 
																	<if test="codUnidad != null">
																		and cod_unidad = ${codUnidad}
																    </if> 
																    <if test="codCaso != null">
																		and cod_caso = ${codCaso}
																    </if>
																    <if test="codSubaso != null">
																		and cod_subaso = ${codSubaso}
																    </if>	
																    
																    <if test="area != null">
																		and area = '${area}'
																    </if>
																    <if test="zona != null">
																		and zona = '${zona}'
																    </if>
																    <if test="subzona != null">
																		and subzona = '${subzona}'
																    </if>
																    <if test="estado != null">
																		and cod_estado = ${estado}
																    </if>
																    <if test="subestado != null">
																		and cod_subestado = ${subestado}
																    </if>	
																    
															 )as numeric),4)*100 as "porcentaje" 
				from mapa.geo_map_estadistica
				where 1=1 and cod_unidad is not null
					<if test="fecDesde != null">
						and fecha<![CDATA[ >= ]]>to_date('${fecDesde}', 'dd/mm/yyyy')
					</if> 
					<if test="fecHasta != null">
						and fecha<![CDATA[ <= ]]>to_date('${fecHasta}', 'dd/mm/yyyy') + 1
					</if> 
					<if test="codUnidad != null">
						and cod_unidad = ${codUnidad}
				    </if> 
				    <if test="codCaso != null">
						and cod_caso = ${codCaso}
				    </if>
				    <if test="codSubaso != null">
						and cod_subaso = ${codSubaso}
				    </if>	
				    
				    <if test="area != null">
						and area = '${area}'
				    </if>
				    <if test="zona != null">
						and zona = '${zona}'
				    </if>
				    <if test="subzona != null">
						and subzona = '${subzona}'
				    </if>
				    <if test="estado != null">
						and cod_estado = ${estado}
				    </if>
				    <if test="subestado != null">
						and cod_subestado = ${subestado}
				    </if>	
		<choose>
			<when test="codUnidad != null and codCaso != null">
				group by cod_subcaso, desc_subcaso
				order by cod_subcaso
			</when>
			<when test="codUnidad != null and codCaso == null">
				group by cod_caso, desc_caso
				order by cod_caso
			</when>
			<otherwise>
				group by cod_unidad, desc_unidad
				order by cod_unidad
			</otherwise>
		</choose>
	</select>
	
	
	<select id="selectPieNull" resultType="hashMap">
		select cod_tipo as cod, desc_tipo as desc, 0 as "cant", '' as "porcentaje" from mapa.geo_map_maestro_tipo where cod_tipo=991
	</select>


<!-- CONSTRUCCION DE HEATMAP CHART -->
	<select id="selectHeatmap" parameterType="HashMap" resultType="hashMap">
				select 
					coordenadas,
					longitud,
					latitud
				from mapa.geo_map_estadistica
				
				where 1=1 and cod_unidad is not null
					and coordenadas is not null
					<if test="fecDesde != null">
						and fecha<![CDATA[ >= ]]>to_date('${fecDesde}', 'dd/mm/yyyy')
					</if> 
					<if test="fecHasta != null">
						and fecha<![CDATA[ <= ]]>to_date('${fecHasta}', 'dd/mm/yyyy') + 1
					</if> 
					<if test="codUnidad != null">
						and cod_unidad = #{codUnidad}
				    </if> 
				    <if test="codCaso != null">
						and cod_caso = #{codCaso}
				    </if>
				    <if test="codSubaso != null">
						and cod_subaso = ${codSubaso}
				    </if>	
				    
				    <if test="area != null">
						and area = '${area}'
				    </if>
				    <if test="zona != null">
						and zona = '${zona}'
				    </if>
				    <if test="subzona != null">
						and subzona = '${subzona}'
				    </if>
				    <if test="estado != null">
						and cod_estado = ${estado}
				    </if>
				    <if test="subestado != null">
						and cod_subestado = ${subestado}
				    </if>	
	</select>




<!-- CONSTRUCCION DE CHART DE FRECUENCIA DIARIA -->
	<select id="selectFrecuenciaDia" parameterType="HashMap" resultType="hashMap">
				select a.desc_tipo as "dia", case when b.fr is null then 0 else b.fr end as "fr" 
				from
					(
						select desc_tipo from mapa.geo_map_maestro_tipo where cod_tpo_padre = 6 
					) a
				left join
					(
						select t.dia as "d", t.nomb_dia as "dia", round(avg(t.cant),2) as "fr"  
								from
									( 
										select dia, mes, anio, nomb_dia, hora, count(*) as "cant" from mapa.geo_map_estadistica
										where 1=1 and cod_unidad is not null and zona is not null
													and subzona is not null
												<if test="fecDesde != null">
													and fecha<![CDATA[ >= ]]>to_date('${fecDesde}', 'dd/mm/yyyy')
												</if> 
												<if test="fecHasta != null">
													and fecha<![CDATA[ <= ]]>to_date('${fecHasta}', 'dd/mm/yyyy') + 1
												</if> 
												<if test="codUnidad != null">
													and cod_unidad = ${codUnidad}
											    </if> 
											    <if test="codCaso != null">
													and cod_caso = ${codCaso}
											    </if>
											    <if test="codSubaso != null">
													and cod_subaso = ${codSubaso}
											    </if>	
											    
											    <if test="area != null">
													and area = '${area}'
											    </if>
											    <if test="zona != null">
													and zona = '${zona}'
											    </if>
											    <if test="subzona != null">
													and subzona = '${subzona}'
											    </if>
											    <if test="estado != null">
													and cod_estado = ${estado}
											    </if>
											    <if test="subestado != null">
													and cod_subestado = ${subestado}
											    </if>	
											    
										group by dia, mes, anio, nomb_dia, hora  
										order by dia 
									) t
								group by t.nomb_dia, t.dia
								order by t.dia
					) b
				on a.desc_tipo=b.dia
	</select>



<!-- CONSTRUCCION DE CHART FRECUENCIA HORARIA -->
	<select id="selectFrecuenciaHora" parameterType="HashMap" resultType="hashMap">
				select a.desc_tipo as "hora", case when b.fr is null then 0 else b.fr end as "fr" 
				from
					( 
						select cast(desc_tipo as int) from mapa.geo_map_maestro_tipo where cod_tpo_padre = 907 order by cast(desc_tipo as int) 
					) a
				left join
					(
						select t.hora as "hora", round(avg(t.cant),2) as "fr" 
								from
									( 
										select dia, mes, anio, nomb_dia, hora, count(*) as "cant" from mapa.geo_map_estadistica
										where 1=1 
												<if test="fecDesde != null">
													and fecha<![CDATA[ >= ]]>to_date('${fecDesde}', 'dd/mm/yyyy')
												</if> 
												<if test="fecHasta != null">
													and fecha<![CDATA[ <= ]]>to_date('${fecHasta}', 'dd/mm/yyyy') + 1
												</if> 
												<if test="codUnidad != null">
													and cod_unidad = ${codUnidad}
											    </if> 
											    <if test="codCaso != null">
													and cod_caso = ${codCaso}
											    </if>
											    <if test="codSubaso != null">
													and cod_subaso = ${codSubaso}
											    </if>	
											    
											    <if test="area != null">
													and area = '${area}'
											    </if>
											    <if test="zona != null">
													and zona = '${zona}'
											    </if>
											    <if test="subzona != null">
													and subzona = '${subzona}'
											    </if>
											    <if test="estado != null">
													and cod_estado = ${estado}
											    </if>
											    <if test="subestado != null">
													and cod_subestado = ${subestado}
											    </if>	
											    
										group by dia, mes, anio, nomb_dia, hora 
										order by hora
									) t
								group by t.hora
								order by t.hora
					) b
				on a.desc_tipo=b.hora
	</select>
	

<!-- CONSTRUCCION CHART DE RANKING ZONAS -->
	<select id="selectTopZona" parameterType="HashMap" resultType="hashMap">
				select desc_tipo "zona", case when cant is null then 0 else cant end as "cant" from
					(select desc_tipo from mapa.geo_map_maestro_tipo where cod_tpo_padre=932) a
				left join
					(select zona, count(valor) as "cant" from mapa.geo_map_estadistica where zona is not null 
							<if test="fecDesde != null">
								and fecha<![CDATA[ >= ]]>to_date('${fecDesde}', 'dd/mm/yyyy')
							</if> 
							<if test="fecHasta != null">
								and fecha<![CDATA[ <= ]]>to_date('${fecHasta}', 'dd/mm/yyyy') + 1
							</if> 
							<if test="codUnidad != null">
								and cod_unidad = ${codUnidad}
						    </if> 
						    <if test="codCaso != null">
								and cod_caso = ${codCaso}
						    </if>				
						    <if test="codSubaso != null">
								and cod_subaso = ${codSubaso}
						    </if>	
						    
						    <if test="area != null">
								and area = '${area}'
						    </if>
						    <if test="zona != null">
								and zona = '${zona}'
						    </if>
						    <if test="subzona != null">
								and subzona = '${subzona}'
						    </if>
						    <if test="estado != null">
								and cod_estado = ${estado}
						    </if>
						    <if test="subestado != null">
								and cod_subestado = ${subestado}
						    </if>	
					group by zona) b
				on a.desc_tipo=b.zona
				order by cant desc limit 5
	</select>
	

<!-- EXPORTACION A EXCEL -->
	<select id="selectBandejaExportacion2" parameterType="HashMap" resultType="hashMap">
			select 
					i.id_incidencia as "id",
					i.nro_caso_voxiva as "nro_caso_voxiva",
					i.desc_unidad as "unidad",
					i.desc_caso as "caso",
					i.desc_subcaso as "subcaso",
					i.desc_medio as "medio",
					i.desc_situacion as "situacion",
					i.nomb_report as "nomb_report",
					i.telf_report as "telf_report",
					i.dir_report as "dir_report",
					i.cext_report as "cext_report",
					i.coordenadas as "coordenadas",
					i.desc_tpo_via as "tpo_via",
					i.desc_via as "nomb_via",
					i.cdra as "cdra",
					i.dpto as "dpto",
					i.area as "area",
					i.zona as "zona",
					i.subzona as "subzona",
					i.fec_notificacion as "fec_notificacion",
					i.fec_evento as "fec_evento",
					i.fec_atencion as "fec_atencion",
					i.fec_cierre as "fec_cierre",
					i.descripcion as "descripcion",
					m1.desc_tipo as "severidad",
					case when i.cod_estado=829 then 'COMETIDO'
						when i.cod_estado=830 then 'FRUSTRADO'
						else null
						end as "estado",
					case when i.cod_subestado=832 then 'CON CAPTURA'
						when i.cod_subestado=833 then 'SIN CAPTURA'
						else null
						end as "subestado",
					m.desc_tipo as "modalidad",
					i.desc_motivo as "motivo",
					i.tpo_hallazgo as "hallazgo",
					i.tpo_sexo as "sexo",
					i.usr_registra as "usr_registra",
					i.usr_modifica as "usr_modifica"
			from mapa.geo_map_incidencia i
			left join mapa.geo_map_maestro_tipo m on i.cod_modalidad=m.cod_tipo
			left join mapa.geo_map_maestro_tipo m1 on i.cod_severidad=m1.cod_tipo
			where i.est_reg='A' and i.cod_unidad is not null
					<if test="fec1 != null">
						and i.fec_notificacion<![CDATA[ >= ]]> to_timestamp('${fec1}','dd/mm/yyyy')
					</if> 
					<if test="fec2 != null">
						and i.fec_notificacion<![CDATA[ <= ]]> to_timestamp('${fec2}','dd/mm/yyyy') + interval '1 day'
					</if> 
					<if test="unidad != null">
						and i.cod_unidad = ${unidad}
					</if> 
					<if test="caso != null">
						and i.cod_caso = ${caso}
					</if> 
					<if test="subcaso != null">
						and i.cod_subcaso = ${subcaso}
					</if> 
			order by 1
			
	</select>
	
	<select id="selectBandejaExportacionInterviniente" parameterType="HashMap" resultType="hashMap">
			select 
				id_incidencia,
				cod_interv,
				cod_tpo_interv,
				cod_tpo_puesto,
				desc_tpo_interv,
				desc_tpo_puesto,
				nomb_interv,
				apoyo_policial
			from mapa.geo_map_interviniente
			where 1=1
				<if test="listaId != null">
					and id_incidencia in
					<foreach close=")" collection="listaId" index="index" item="item" open="(" separator=",">
						        #{item}
					</foreach>
				</if>
			order by 1, 2
	</select>
	
	<select id="selectBandejaExportacionInvolucrado" parameterType="HashMap" resultType="hashMap">
				select 
					id_incidencia,
					cod_involuc,
					desc_tpo_involuc,
					desc_tpo_doc,
					nomb_involuc,
					edad_involuc,
					num_doc_involuc,
					desc_observ,
					clase_vehic,
					marca_vehic,
					model_vehic,
					placa_vehic
				from mapa.geo_map_involucrado
				where 1=1
				<if test="listaId != null">
					and id_incidencia in
					<foreach close=")" collection="listaId" index="index" item="item" open="(" separator=",">
						        #{item}
					</foreach>
				</if>
			order by 1, 2
	</select>
	
	<select id="selectBandejaExportacionVehiculo" parameterType="HashMap" resultType="hashMap">
			select 
				id_incidencia,
				cod_vehic,
				clase_vehic,
				marca_vehic,
				model_vehic,
				placa_vehic,
				color_vehic,
				anio_vehic
			from mapa.geo_map_vehiculo
			where 1=1
				<if test="listaId != null">
					and id_incidencia in
					<foreach close=")" collection="listaId" index="index" item="item" open="(" separator=",">
						        #{item}
					</foreach>
				</if>
			order by 1, 2
	</select>
	
	

<!-- REASIGNACION DE INCIDENCIAS POR LOTES -->
	<update id="reasignarOperador" parameterType="HashMap">
    			update mapa.geo_map_incidencia
			    <set>
			    	tpo_operador = #{tpoOperador},
			    	flg_reasignado = 'S' 
				</set>
				where id_incidencia in
					<foreach close=")" collection="listIds" index="index" item="item" open="(" separator=",">
					        #{item}
					</foreach>
	</update>
	
	
	
	<resultMap id="ResultMapTetraTimelap" type="hashmap">
			<id column="issi" jdbcType="INTEGER" property="issi" />
			<result column="id_radio" jdbcType="INTEGER" property="idRadio" />
			<result column="serie" jdbcType="VARCHAR" property="serie" />
			<result column="tei" jdbcType="VARCHAR" property="tei" />
			<result column="latitud" jdbcType="VARCHAR" property="latitud" />
			<result column="longitud" jdbcType="VARCHAR" property="longitud" />
			<result column="presicion" jdbcType="VARCHAR" property="presicion" />
			<result column="velocidad" jdbcType="VARCHAR" property="velocidad" />
			<result column="direccion" jdbcType="VARCHAR" property="direccion" />
			<result column="estado" jdbcType="VARCHAR" property="estado" />
			<result column="fecha" jdbcType="TIMESTAMP" property="fecha" />
			<result column="id_info" jdbcType="VARCHAR" property="idInfo" />
			<result column="nro_asignacion" jdbcType="VARCHAR" property="nroAsignacion" />
			<result column="area" jdbcType="VARCHAR" property="area" />
			<result column="nro_interno" jdbcType="VARCHAR" property="nroInterno" />
			<result column="tipo_vehiculo" jdbcType="VARCHAR" property="tipoVehiculo" />
			<result column="marca_vehiculo" jdbcType="VARCHAR" property="marcaVehiculo" />
			<result column="modelo_vehiculo" jdbcType="VARCHAR" property="modeloVehiculo" />
			<result column="placa" jdbcType="VARCHAR" property="placa" />
			<result column="tipo_radio" jdbcType="VARCHAR" property="tipoRadio" />
			<result column="modelo_radio" jdbcType="VARCHAR" property="modeloRadio" />
			<result column="zona" jdbcType="VARCHAR" property="zona" />
			<result column="sub_zona" jdbcType="VARCHAR" property="subzona" />
	</resultMap>
	

<!-- LISTA DE RADIOS TETRA POR INSTANTANEA TEMPORAL POR INCIDENCIA -->
	<!-- Solo busca tetras en el momento de la incidencia -->
	<select id="selectTetraTimelap" parameterType="HashMap" resultMap="ResultMapTetraTimelap">
		select 
			it.issi as "issi",sr.id_radio as "id_radio",sr.serie as "serie",sr.tei as "tei",sr.latitud as "latitud",sr.longitud as "longitud",sr.presicion as "presicion",
			sr.velocidad as "velocidad",sr.direccion as "direccion",sr.estado as "estado",sr.fecha as "fecha",it.id_info as "id_info",it.nro_asignacion as "nro_asignacion",
			it.area as "area",it.nro_interno as "nro_interno",it.tipo_vehiculo as "tipo_vehiculo",it.marca_vehiculo as "marca_vehiculo",it.modelo_vehiculo as "modelo_vehiculo",
			it.placa as "placa",it.tipo_radio as "tipo_radio",it.modelo_radio as "modelo_radio",it.zona as "zona",it.sub_zona as "sub_zona"
		from 
			(
				select min(s._id) as "_id", t.*
				from mapa.geo_sereno_ruta s inner join mapa.geo_info_tetra t on s.issi=t.issi 
				where
				<choose>
					<when test="id_incidencia != null">
						s.fecha 
					   		between (select fec_evento from mapa.geo_map_incidencia where id_incidencia=${id_incidencia})
					   			and (select fec_evento from mapa.geo_map_incidencia where id_incidencia=${id_incidencia}) + '5 min'
					</when>
					<otherwise>
						s.fecha between current_timestamp and current_timestamp + '5 min'
					</otherwise>
				</choose> 
				group by t.issi
			) it
		inner join 
			mapa.geo_sereno_ruta sr 
		on it._id=sr._id
 	</select>
 	
 	
 	<!-- 
 	<select id="selectTetraTimelap" parameterType="HashMap" resultMap="ResultMapTetraTimelap">
		select 
			it.issi as "issi",sr.id_radio as "id_radio",sr.serie as "serie",sr.tei as "tei",sr.latitud as "latitud",sr.longitud as "longitud",sr.presicion as "presicion",
			sr.velocidad as "velocidad",sr.direccion as "direccion",sr.estado as "estado",sr.fecha as "fecha",it.id_info as "id_info",it.nro_asignacion as "nro_asignacion",
			it.area as "area",it.nro_interno as "nro_interno",it.tipo_vehiculo as "tipo_vehiculo",it.marca_vehiculo as "marca_vehiculo",it.modelo_vehiculo as "modelo_vehiculo",
			it.placa as "placa",it.tipo_radio as "tipo_radio",it.modelo_radio as "modelo_radio",it.zona as "zona",it.sub_zona as "sub_zona"
		from 
			(
				select min(s._id) as "_id", t.*
				from mapa.geo_sereno_ruta s inner join mapa.geo_info_tetra t on s.issi=t.issi 
				where
				<choose>
					<when test="id_incidencia != null">
						s.fecha 
					   		between (select fec_notificacion from mapa.geo_map_incidencia where id_incidencia=${id_incidencia}) + interval '1m' * ${minuto1}
					   			and (select fec_notificacion from mapa.geo_map_incidencia where id_incidencia=${id_incidencia}) + interval '1m' * ${minuto2}
					</when>
					<otherwise>
						s.fecha between current_timestamp + interval '1m' * ${minuto1} 
									and current_timestamp + interval '1m' * ${minuto2}
					</otherwise>
				</choose> 
				group by t.issi
			) it
		inner join 
			mapa.geo_sereno_ruta sr 
		on it._id=sr._id
 	</select>
 	 -->
 	
 	
 	
	<!-- EL MISMO QUE EL ANTERIOR PERO MAS RADIO DE ACCION ALREDEDOR DE LA INCIDENCIA -->
	<!-- <select id="selectTetraTimelap" parameterType="HashMap" resultMap="ResultMapTetraTimelap">
		
		select 
			it.issi as "issi",
			sr.id_radio as "idRadio",
			sr.serie as "serie",
			sr.tei as "tei",
			sr.latitud as "latitud",
			sr.longitud as "longitud",
			sr.presicion as "presicion",
			sr.velocidad as "velocidad",
			sr.direccion as "direccion",
			sr.estado as "estado",
			sr.fecha as "fecha",
			it.id_info as "id_info",
			it.nro_asignacion as "nro_asignacion",
			it.area as "area",
			it.nro_interno as "nro_interno",
			it.tipo_vehiculo as "tipo_vehiculo",
			it.marca_vehiculo as "marca_vehiculo",
			it.modelo_vehiculo as "modelo_vehiculo",
			it.placa as "placa",
			it.tipo_radio as "tipo_radio",
			it.modelo_radio as "modelo_radio",
			it.zona as "zona",
			it.sub_zona as "sub_zona"
		from 
			(
				select min(s._id) as "_id", t.*
				from mapa.geo_sereno_ruta s inner join mapa.geo_info_tetra t on s.issi=t.issi 
				where 
					not t.area in ('GERENTE SEGURIDAD CIUDADANA','GERENTE MUNICIPAL','FISCALIZACION','ALMACEN CAM','ALCALDE')
					and not cast(s.estado as text) in ('001','00C','00E','00F','901','902','105','00A','010','0C0','0E0','0F0')
					<if test="fecha != null">
				        and s.fecha between ${fecha} and ${fecha} + '5 min'
				    </if>
					<if test="latitud != null and longitud != null">
				        and ST_DWithin(s.the_geom, ST_SetSRID(ST_Point( ${latitud}, ${longitud} ), 4326), 100)
				    </if>
				group by t.issi
			) it
		inner join 
			mapa.geo_sereno_ruta sr 
		on it._id=sr._id
 	</select> -->
 	
 	
 	
 	
 	<!-- PRUEBAS EXPERIMENTALES -->
 	
 	<select id="selectTetraList" resultType="hashMap">
 		select distinct
			t.issi,
			s.serie,
			s.tei,
			t.tipo_radio,
			t.modelo_radio,
			t.tipo_vehiculo,
			t.modelo_vehiculo,
			t.marca_vehiculo,
			t.placa,
			t.zona
		from mapa.geo_sereno_ruta s inner join mapa.geo_info_tetra t on s.issi=t.issi 
		where s.fecha between (select fec_notificacion from mapa.geo_map_incidencia where id_incidencia=1524) + interval '1m' * -60
			   		and (select fec_notificacion from mapa.geo_map_incidencia where id_incidencia=1524) + interval '1m' * 60
 	</select>
 	
 	
 	<resultMap id="SerenoRutaMap" type="pe.gob.miraflores.mobile.domain.mapaincidencias.SerenoRuta">
		<id column="_id" jdbcType="INTEGER" property="id" />
		<result column="id_radio" jdbcType="INTEGER" property="idRadio" />
		<result column="serie" jdbcType="VARCHAR" property="serie" />
		<result column="tei" jdbcType="VARCHAR" property="tei" />
		<result column="issi" jdbcType="INTEGER" property="issi" />
		<result column="latitud" jdbcType="DOUBLE" property="latitud" />
		<result column="longitud" jdbcType="DOUBLE" property="longitud" />
		<result column="presicion" jdbcType="INTEGER" property="presicion" />
		<result column="velocidad" jdbcType="DOUBLE" property="velocidad" />
		<result column="direccion" jdbcType="VARCHAR" property="direccion" />
		<result column="estado" jdbcType="INTEGER" property="estado" />
		<result column="fecha" jdbcType="TIMESTAMP" property="fecha" />
		<result column="the_geom" jdbcType="OTHER" property="theGeom" />
	</resultMap>
	
 	<select id="selectTetraPosition" parameterType="HashMap" resultMap="SerenoRutaMap">
		select * from mapa.geo_sereno_ruta
		where 1=1
			<if test="issi != null">
		        and issi = ${issi}
		    </if>
			and fecha between (select fec_notificacion from mapa.geo_map_incidencia where id_incidencia=1524) + interval '1m' * -60
			   		and (select fec_notificacion from mapa.geo_map_incidencia where id_incidencia=1524) + interval '1m' * 60
		order by fecha
 	</select>
 	
 	
	<update id="deleteFlgParte" parameterType="java.lang.Integer">
    	update mapa.geo_map_incidencia set param2 = null where id_incidencia = #{idIncidencia,jdbcType=INTEGER}
	</update>
 	
</mapper>